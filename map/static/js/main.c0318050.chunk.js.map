{"version":3,"sources":["images/wifi.svg","images/toilet.svg","images/user.svg","images/empty-landmark.svg","redux/middlewares/const.js","redux/shared/actions.js","config/map.js","redux/shared/reducer.js","redux/shared/selectors.js","redux/shared/index.js","redux/middlewares/globalErrorHandler.js","redux/actions/ui/feedback-sidebar.js","redux/reducers/ui/feedback-sidebar.js","redux/reducers/ui/index.js","redux/markers/toilets/actions.js","redux/markers/toilets/reducer.js","services/api.js","services/feedback.js","services/markers.js","services/routing.js","redux/markers/toilets/thunks.js","redux/markers/toilets/index.js","redux/markers/wifi/actions.js","redux/markers/wifi/reducer.js","redux/markers/wifi/thunks.js","redux/markers/wifi/index.js","redux/markers/actions.js","redux/markers/reducer.js","redux/user/actions.js","redux/user/selectors.js","redux/user/reducer.js","redux/user/index.js","redux/markers/selectors.js","redux/markers/thunks.js","redux/markers/index.js","redux/feedback/actions.js","redux/feedback/reducer.js","redux/feedback/thunks.js","redux/feedback/index.js","redux/routing/actions.js","redux/routing/reducer.js","redux/routing/selectors.js","redux/routing/helpers.js","redux/routing/thunks.js","redux/rootReducer.js","redux/routing/index.js","config/notification.js","styles/theme.js","styles/sizes.js","components/ToiletMarker/icon.js","components/ToiletMarker/index.js","components/ToiletMarker/marker.jsx","components/ToiletMarker/styles.js","components/WifiMarker/icon.js","components/WifiMarker/index.js","components/WifiMarker/marker.jsx","components/WifiMarker/styles.js","components/UserMarker/icon.js","components/UserMarker/index.js","components/UserMarker/marker.jsx","components/UserLocationButton/index.js","components/UserLocationButton/button.jsx","components/FilterButton/styles.js","components/FilterButton/option.jsx","components/FilterButton/button.jsx","components/FilterButton/index.js","views/FeedbackSidebar/styles.js","views/FeedbackSidebar/sidebar.jsx","views/FeedbackSidebar/container.jsx","views/FeedbackSidebar/index.js","views/FreebeeMap/helpers.js","components/NewMarker/icon.js","views/FreebeeMap/map.jsx","views/FreebeeMap/styles.js","views/FreebeeMap/container.jsx","views/FreebeeMap/index.js","views/RouteInformationPanel/panel.jsx","views/RouteInformationPanel/helpers.js","views/RouteInformationPanel/index.js","views/RouteInformationPanel/styles.js","views/FreebeeMapPage/page.jsx","views/FreebeeMapPage/styles.js","views/FreebeeMapPage/container.jsx","views/FreebeeMapPage/index.js","App.jsx","redux/store.js","index.js"],"names":["module","exports","__webpack_require__","p","GEOLOCATION_ERRORS","_GEOLOCATION_ERRORS","Object","defineProperty","createActions","SHARED","SET_ERROR","errorMessage","errorId","shortId","generate","SET_MAP_MODE","mode","SET_MAP_VIEWPORT","viewport","shared","setError","setMapMode","setMapViewport","MAP_MODES","READ","CREATE","defaultState","errorList","mapMode","mapViewport","zoom","center","reducer","handleActions","_handleActions","state","_ref","_ref$payload","payload","update","$push","_ref2","$set","_ref3","selectLastError","createSelector","list","length","selectMapMode","middleware","store","next","action","error","_","get","message","dispatch","sharedActions","geolocationErrorCode","open","createAction","concat","close","feedbackSidebarActions","feedback_sidebar_handleActions","toString","objectSpread","combineReducers","feedbackSidebar","MARKERS","TOILETS","GET_MARKERS_REQUEST","GET_MARKERS_SUCCESS","toilets","GET_MARKERS_ERROR","markers","getMarkersRequest","getMarkersSuccess","getMarkersError","reducer_handleActions","isFetching","toiletsToUpdate","map","w","location","rest","objectWithoutProperties","newLocation","coordinates","baseHereRoutingApi","process","buildApiUrl","root","url","buildBackendApiUrl","buildHereRoutingApiUrl","feedback","wifi","routing","createFeedback","axios","post","api","getWifi","wifiApi","getToilets","toiletsApi","getMarkerTypes","markersApi","MODE_COMPONENTS","type","transportModes","trafficMode","getRoute","point0","point1","waypoint0","join","waypoint1","values","params","asyncToGenerator","regenerator_default","a","mark","_callee","data","wrap","_context","prev","markersService","sent","t0","console","stop","this","_x","apply","arguments","WIFIS","wifis","wifi_reducer_handleActions","wifiToUpdate","SET_FILTER","filter","SET_NEW_MARKER_POSITION","position","GET_TYPES_REQUEST","GET_TYPES_SUCCESS","types","GET_TYPES_ERROR","setFilter","setNewMarkerPosition","getTypesRequest","getTypesSuccess","getTypesError","markersActions","selected","newMarkerPosition","markerTypes","isMarkerTypesFetching","markerTypesError","markers_reducer_handleActions","_ref4","user","USER","SET_CURRENT_LOCATION","locationOrError","currentLocation","code","selectUserCurrentLocation","selectUserCurrentLocationError","locationError","setCurrentLocation","actions","rootSelector","selectWifi","selectToilets","selectIsAllMarkersFetching","selectFilter","selectNewMarkerPositionInGeoJSON","userSelectors","userPosition","lat","lng","wifiThunks","toiletsThunks","getMarkers","Promise","all","_callee2","_context2","_x2","FEEDBACK","CREATE_FEEDBACK_REQUEST","CREATE_FEEDBACK_SUCCESS","CREATE_FEEDBACK_ERROR","createFeedbackRequest","createFeedbackSuccess","createFeedbackError","feedback_reducer_handleActions","isLoading","feedbackService","ROUTING","GET_ROUTE_REQUEST","marker","GET_ROUTE_SUCCESS","route","GET_ROUTE_ERROR","RESET_ROUTE","getRouteRequest","getRouteSuccess","getRouteError","resetRoute","routing_reducer_handleActions","selectRouting","selectRoute","leg","selectRouteSummary","summary","getFormattedRoute","_route$","response","userLocation","routingService","reducers","ui","MAX_SNACK","ANCHOR","vertical","horizontal","theme","createMuiTheme","palette","primary","main","secondary","typography","useNextVariants","markerIcon","options","iconUrl","toilet","iconSize","icon","L","Icon","Marker","withStyles","routeButton","paddingTop","paddingBottom","&:hover","backgroundColor","content","width","fontSize","point","fontWeight","title","classes","buildRoute","react","onDblclick","Popup","autoPan","className","index_es","disableRipple","onClick","icons_index_es","address","description","userMarker","zIndexOffset","Button","react_default","createElement","color","styles","drop","display","flexDirection","alignItems","button","mainButton","optionButton","marginTop","@media only screen and (min-width: 768px)","top","left","isSelected","cc","size","WcOptionIcon","WifiOptionIcon","ClearAllOptionIcon","FilterButton","onFilterClick","_this","props","toggle","setState","prevState","_this$props","selectedFilter","FilterButton_option","Component","contrastText","sidebarRoot","overflowX","sidebarTitle","padding","sidebarTitleContent","fontFamily","fieldsContainer","margin","formField","buttonsContainer","justifyContent","breakpoints","up","freebeeTypes","isOpen","cancel","submit","handleFieldChange","onClose","onOpen","anchor","paper","container","item","xs","variant","gutterBottom","align","spacing","fullWidth","placeholder","label","required","onChange","value","InputLabelProps","shrink","htmlFor","inputProps","id","name","key","author","FeedbackSidebarContainer","e","target","handleSubmit","closeSidebar","sendFeedback","setReadMapMode","_this$state","handleCancel","_this$props2","_this$props3","openSidebar","_this$state2","sidebar","mapDispatch","thunks","FeedbackSidebar","connect","markersSelectors","getFlatPosition","latitude","longitude","newMarker","FreebeeMap","refNewMarker","createRef","setMapRef","element","updateNewMarkerPosition","current","leafletElement","getLatLng","handleViewportChanged","buildRouteToMarker","prevProps","panTo","_this2","Map","onViewportChanged","zoomControl","ref","TileLayer","attribution","FeatureGroup","draggable","onDragend","components_UserMarker","components_WifiMarker","components_ToiletMarker","Polyline","positions","buildedRoutes","maneuver","startPosition","start","originalPosition","endPosition","end","toConsumableArray","getPositionsForPolyline","defaultProps","height","MapContainer","getUserLocation","navigator","geolocation","getCurrentPosition","_position$coords","coords","currentUserLocation","selectors","routingThunks","userActions","routingSelectors","markerActions","RoutePanel","_this$props$summary","time","minutes","travelTime","Math","ceil","hours","getTimeFromSummary","distance","getDistanceFromSummary","header","closeButtonRoot","closeButton","disableGutters","PureComponent","Panel","marginBottom","progress","zIndex","filterButton","routePanel","userLocationButton","contactUsWrapper","bottom","contactUs","borderRadius","contactUsDesktop","right","@media only screen and (max-width: 768px)","openFeedbackSidebar","setCreationMapMode","setUserLocation","routeSummary","isMarkersFetching","isReadMode","views_FreebeeMap","components_FilterButton","components_UserLocationButton","views_FeedbackSidebar","RouteInformationPanel","FreebeeMapPageContainer","setNewMarkerPositionOnMapViewport","lastGlobalError","enqueueSnackbar","oldErrorId","newErrorId","page","assign","FreebeeMapPage","sharedSelectors","setUserCurrentLocation","markersThunks","routingActions","propsFromState","propsFromDispatch","slice","withSnackbar","App","es","applyMiddleware","thunk","globalErrorHandler","enhancer","composeWithDevTools","composeEnhancers","createStore","rootReducer","build","maxSnack","notification","anchorOrigin","BrowserRouter","basename","Fragment","Switch","Route","path","component","document","getElementById","ReactDOM","render","src_App"],"mappings":"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","file":"static/js/main.c0318050.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/wifi.a5113c91.svg\";","module.exports = __webpack_public_path__ + \"static/media/toilet.26830feb.svg\";","module.exports = __webpack_public_path__ + \"static/media/user.c45c2ef8.svg\";","module.exports = __webpack_public_path__ + \"static/media/empty-landmark.76edbd6f.svg\";","export const NETWORK_ERROR_MESSAGE = 'Network Error';\r\nexport const NETWORK_ERROR_MESSAGE_RU = 'Ошибка подключения к интернету.';\r\n\r\nexport const LOCATION_ACCESS_DENIED_CODE = 1;\r\nexport const LOCATION_ACCESS_DENIED_MESSAGE_RU = 'Для работы приложения необходимо включить геолокацию.';\r\n\r\nexport const LOCATION_UNAVAILABLE_CODE = 2;\r\nexport const LOCATION_UNAVAILABLE_MESSAGE_RU = 'Ошибка при определении месторасположения.';\r\n\r\nexport const LOCATION_TIMEOUT_CODE = 3;\r\nexport const LOCATION_TIMEOUT_MESSAGE_RU = 'Время ожидания вышло.';\r\n\r\nexport const GEOLOCATION_ERRORS = {\r\n  [LOCATION_ACCESS_DENIED_CODE]: LOCATION_ACCESS_DENIED_MESSAGE_RU,\r\n  [LOCATION_UNAVAILABLE_CODE]: LOCATION_UNAVAILABLE_MESSAGE_RU,\r\n  [LOCATION_TIMEOUT_CODE]: LOCATION_TIMEOUT_MESSAGE_RU,\r\n};\r\n","/* @flow */\r\nimport { createActions } from 'redux-actions';\r\nimport shortId from 'shortid';\r\n\r\nconst {\r\n  shared: {\r\n    setError,\r\n    setMapMode,\r\n    setMapViewport,\r\n  },\r\n} = createActions({\r\n  SHARED: {\r\n    SET_ERROR: errorMessage => ({ errorId: shortId.generate(), errorMessage }),\r\n    SET_MAP_MODE: mode => ({ mode }),\r\n    SET_MAP_VIEWPORT: viewport => ({ viewport }),\r\n  },\r\n});\r\n\r\nexport {\r\n  setError,\r\n  setMapMode,\r\n  setMapViewport,\r\n};\r\n","/* @flow */\r\nexport const TILE_LAYER_URL = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';\r\nexport const MAP_ATTRIBUTION = '&amp;copy <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors';\r\n\r\nexport const MAP_MODES = {\r\n  READ: 'read',\r\n  CREATE: 'create',\r\n};\r\n\r\nexport const DEFAULT_MAP_CENTER = [53.9017, 27.5429];\r\n\r\nexport const DEFAULT_MAP_ZOOM = 12;\r\n","// @flow\r\nimport { handleActions } from 'redux-actions';\r\nimport update from 'immutability-helper';\r\nimport { setError, setMapMode, setMapViewport } from './actions';\r\nimport { DEFAULT_MAP_CENTER, DEFAULT_MAP_ZOOM, MAP_MODES } from '../../config/map';\r\n\r\nconst defaultState = {\r\n  errorList: [],\r\n\r\n  mapMode: MAP_MODES.READ,\r\n\r\n  mapViewport: {\r\n    zoom: DEFAULT_MAP_ZOOM,\r\n    center: DEFAULT_MAP_CENTER,\r\n  },\r\n};\r\n\r\nconst reducer = handleActions({\r\n  [setError]: (state, { payload: { errorMessage, errorId } }) => {\r\n    return update(state, {\r\n      errorList: {\r\n        $push: [{\r\n          errorId,\r\n          errorMessage,\r\n        }],\r\n      },\r\n    });\r\n  },\r\n  [setMapMode]: (state, { payload: { mode } }) => {\r\n    return update(state, {\r\n      mapMode: {\r\n        $set: mode,\r\n      },\r\n    });\r\n  },\r\n  [setMapViewport]: (state, { payload: { viewport } }) => {\r\n    return update(state, {\r\n      mapViewport: {\r\n        $set: viewport,\r\n      },\r\n    });\r\n  },\r\n}, defaultState);\r\n\r\nexport default reducer;\r\n","/* @flow */\r\nimport { createSelector } from 'reselect';\r\n\r\nconst selectErrorsList = state => state.shared.errorList;\r\n\r\nexport const selectLastError = createSelector(\r\n  selectErrorsList,\r\n  (list) => {\r\n    return list.length > 0 ? list[list.length - 1] : null;\r\n  },\r\n);\r\n\r\nexport const selectMapMode = state => state.shared.mapMode;\r\n","/* @flow */\r\n\r\nimport * as sharedActions from './actions';\r\nimport reducer from './reducer';\r\nimport * as selectors from './selectors';\r\nimport * as thunks from './thunks';\r\n\r\nexport {\r\n  sharedActions,\r\n  reducer,\r\n  selectors,\r\n  thunks,\r\n};\r\n\r\nexport default reducer;\r\n","// @flow\r\nimport _ from 'lodash';\r\nimport {\r\n  NETWORK_ERROR_MESSAGE, NETWORK_ERROR_MESSAGE_RU,\r\n  GEOLOCATION_ERRORS,\r\n} from './const';\r\nimport { sharedActions } from '../shared';\r\n\r\nconst middleware = store => next => (action) => {\r\n  const hasError = action.error\r\n    || _.get(action, 'payload.error', false);\r\n  if (hasError) {\r\n    const { payload } = action;\r\n    if (payload.message && payload.message === NETWORK_ERROR_MESSAGE) {\r\n      store.dispatch(sharedActions.setError(NETWORK_ERROR_MESSAGE_RU));\r\n    }\r\n    if (payload.geolocationErrorCode) {\r\n      const errorMessage = GEOLOCATION_ERRORS[payload.geolocationErrorCode];\r\n      store.dispatch(sharedActions.setError(errorMessage));\r\n    }\r\n  }\r\n\r\n  return next(action);\r\n};\r\n\r\nexport default middleware;\r\n","/* @flow */\r\n\r\nimport { createAction } from 'redux-actions';\r\n\r\nconst prefix = 'FEEDBACK_SIDEBAR';\r\n\r\nconst open = createAction(`${prefix}/OPEN`);\r\nconst close = createAction(`${prefix}/CLOSE`);\r\n\r\nexport {\r\n  open,\r\n  close,\r\n};\r\n","/* @flow */\r\nimport { handleActions } from 'redux-actions';\r\nimport { feedbackSidebarActions } from '../../actions/ui';\r\n\r\ntype State = {\r\n  +open: boolean,\r\n};\r\n\r\nconst { open, close } = feedbackSidebarActions;\r\n\r\nconst defaultState: State = {\r\n  open: false,\r\n};\r\n\r\nconst reducer = handleActions(\r\n  {\r\n    [open.toString()]: (state: State) => ({\r\n      ...state,\r\n      open: true,\r\n    }),\r\n    [close.toString()]: (state: State) => ({\r\n      ...state,\r\n      open: false,\r\n    }),\r\n  },\r\n  defaultState,\r\n);\r\n\r\nexport default reducer;\r\n","/* @flow */\r\n\r\nimport { combineReducers } from 'redux';\r\nimport feedbackSidebar from './feedback-sidebar';\r\n\r\nexport default combineReducers({\r\n  feedbackSidebar,\r\n});\r\n","/* @flow */\r\nimport { createActions } from 'redux-actions';\r\n\r\nconst {\r\n  markers: {\r\n    toilets: {\r\n      getMarkersRequest,\r\n      getMarkersSuccess,\r\n      getMarkersError,\r\n    },\r\n  },\r\n} = createActions({\r\n  MARKERS: {\r\n    TOILETS: {\r\n      GET_MARKERS_REQUEST: () => {},\r\n      GET_MARKERS_SUCCESS: toilets => ({ toilets }),\r\n      GET_MARKERS_ERROR: error => ({ error }),\r\n    },\r\n  },\r\n});\r\n\r\nexport {\r\n  getMarkersRequest,\r\n  getMarkersSuccess,\r\n  getMarkersError,\r\n};\r\n","/* @flow */\r\nimport { handleActions } from 'redux-actions';\r\nimport {\r\n  getMarkersRequest,\r\n  getMarkersSuccess,\r\n  getMarkersError,\r\n} from './actions';\r\n\r\nexport type State = {\r\n  +markers: Array<{\r\n    +location: number[],\r\n    +address: string,\r\n    +description?: string,\r\n  }>,\r\n  +error: Object,\r\n  +isFetching: boolean,\r\n};\r\n\r\nconst defaultState: State = {\r\n  markers: [],\r\n  error: {},\r\n  isFetching: false,\r\n};\r\n\r\nconst reducer = handleActions({\r\n  [getMarkersRequest]: (state: State) => ({\r\n    ...state,\r\n    isFetching: true,\r\n  }),\r\n  [getMarkersSuccess]: (state: State, { payload: { toilets } }) => {\r\n    const toiletsToUpdate = toilets.map((w) => {\r\n      const { location, ...rest } = w;\r\n      const newLocation = location.coordinates;\r\n\r\n      return {\r\n        ...rest,\r\n        location: newLocation,\r\n      };\r\n    });\r\n\r\n    return {\r\n      ...state,\r\n      isFetching: false,\r\n      markers: toiletsToUpdate,\r\n    };\r\n  },\r\n  [getMarkersError]: (state: State, { payload: { error } }) => ({\r\n    ...state,\r\n    isFetching: false,\r\n    error,\r\n  }),\r\n\r\n}, defaultState);\r\n\r\nexport default reducer;\r\n","/* @flow */\r\nconst baseApi: string = process.env.REACT_APP_API;\r\nconst baseHereRoutingApi = `\r\n${process.env.REACT_APP_HERE_ROUTE_API}\r\n?app_id=${process.env.REACT_APP_HERE_APP_ID}\r\n&app_code=${process.env.REACT_APP_HERE_APP_CODE}`;\r\n\r\nconst buildApiUrl = (root: string) => (url: string) => `${root}${url}`;\r\nconst buildBackendApiUrl: (url: string) => string = buildApiUrl(baseApi);\r\nconst buildHereRoutingApiUrl: (url: string) => string = buildApiUrl(baseHereRoutingApi);\r\n\r\nconst feedback = {\r\n  create: () => buildBackendApiUrl('/feedback'),\r\n};\r\n\r\nconst wifi = {\r\n  get: () => buildBackendApiUrl('/wifi'),\r\n};\r\n\r\nconst toilets = {\r\n  get: () => buildBackendApiUrl('/toilets'),\r\n};\r\n\r\nconst markers = {\r\n  getTypes: () => buildBackendApiUrl('/markers/types'),\r\n};\r\n\r\nconst routing = {\r\n  getRoute: () => buildHereRoutingApiUrl(''),\r\n};\r\n\r\nexport {\r\n  feedback,\r\n  markers,\r\n  wifi,\r\n  toilets,\r\n  routing,\r\n};\r\n","/* @flow */\r\nimport axios from 'axios';\r\nimport { feedback as api } from './api';\r\n\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const createFeedback = (feedback: any) => axios.post(api.create(), feedback);\r\n","/* @flow */\r\nimport axios from 'axios';\r\nimport {\r\n  markers as markersApi,\r\n  wifi as wifiApi,\r\n  toilets as toiletsApi,\r\n} from './api';\r\n\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const getWifi = () => axios.get(wifiApi.get());\r\n\r\nexport const getToilets = () => axios.get(toiletsApi.get());\r\n\r\nexport const getMarkerTypes = () => axios.get(markersApi.getTypes());\r\n","/* @flow */\r\nimport axios from 'axios';\r\nimport { routing } from './api';\r\n\r\nconst PREFIX = 'geo!';\r\nconst MODE_COMPONENTS = {\r\n  type: 'balanced',\r\n  transportModes: 'pedestrian',\r\n  trafficMode: 'traffic:disabled',\r\n};\r\n\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const getRoute = (point0: number[], point1: number[]) => {\r\n  const waypoint0 = `${PREFIX}${point0.join(',')}`;\r\n  const waypoint1 = `${PREFIX}${point1.join(',')}`;\r\n\r\n  const mode = Object.values(MODE_COMPONENTS).join(';');\r\n\r\n  return axios.get(routing.getRoute(), {\r\n    params: {\r\n      waypoint0,\r\n      waypoint1,\r\n      mode,\r\n    },\r\n  });\r\n};\r\n","import {\r\n  getMarkersRequest,\r\n  getMarkersSuccess,\r\n  getMarkersError,\r\n} from './actions';\r\nimport { markersService } from '../../../services';\r\n\r\nconst getToilets = () => async (dispatch) => {\r\n  dispatch(getMarkersRequest());\r\n\r\n  try {\r\n    const { data } = await markersService.getToilets();\r\n    dispatch(getMarkersSuccess(data));\r\n  } catch (error) {\r\n    console.error(error);\r\n    dispatch(getMarkersError());\r\n  }\r\n};\r\n\r\nexport {\r\n  // eslint-disable-next-line import/prefer-default-export\r\n  getToilets,\r\n};\r\n","/* @flow */\r\nimport * as actions from './actions';\r\nimport reducer from './reducer';\r\nimport * as thunks from './thunks';\r\n\r\nexport {\r\n  actions,\r\n  reducer,\r\n  thunks,\r\n};\r\n\r\nexport default reducer;\r\n","/* @flow */\r\nimport { createActions } from 'redux-actions';\r\n\r\n\r\nconst {\r\n  markers: {\r\n    wifis: {\r\n      getMarkersRequest,\r\n      getMarkersSuccess,\r\n      getMarkersError,\r\n    },\r\n  },\r\n} = createActions({\r\n  MARKERS: {\r\n    WIFIS: {\r\n      GET_MARKERS_REQUEST: () => {},\r\n      GET_MARKERS_SUCCESS: wifi => ({ wifi }),\r\n      GET_MARKERS_ERROR: error => ({ error }),\r\n    },\r\n  },\r\n});\r\n\r\nexport {\r\n  getMarkersRequest,\r\n  getMarkersSuccess,\r\n  getMarkersError,\r\n};\r\n","/* @flow */\r\nimport { handleActions } from 'redux-actions';\r\nimport {\r\n  getMarkersRequest,\r\n  getMarkersSuccess,\r\n  getMarkersError,\r\n} from './actions';\r\n\r\nexport type State = {\r\n  +markers: Array<{\r\n    +location: number[],\r\n    +title: string,\r\n    +address: string,\r\n    +description?: string,\r\n  }>,\r\n  +error: Object,\r\n  +isFetching: boolean,\r\n};\r\n\r\nconst defaultState: State = {\r\n  markers: [],\r\n  error: {},\r\n  isFetching: false,\r\n};\r\n\r\nconst reducer = handleActions({\r\n  [getMarkersRequest]: (state: State) => ({\r\n    ...state,\r\n    isFetching: true,\r\n  }),\r\n  [getMarkersSuccess]: (state: State, { payload: { wifi } }) => {\r\n    const wifiToUpdate = wifi.map((w) => {\r\n      const { location, ...rest } = w;\r\n      const newLocation = location.coordinates;\r\n\r\n      return {\r\n        ...rest,\r\n        location: newLocation,\r\n      };\r\n    });\r\n\r\n    return {\r\n      ...state,\r\n      isFetching: false,\r\n      markers: wifiToUpdate,\r\n    };\r\n  },\r\n  [getMarkersError]: (state: State, { payload: { error } }) => ({\r\n    ...state,\r\n    isFetching: false,\r\n    error,\r\n  }),\r\n\r\n}, defaultState);\r\n\r\nexport default reducer;\r\n","import {\r\n  getMarkersRequest,\r\n  getMarkersSuccess,\r\n  getMarkersError,\r\n} from './actions';\r\nimport { markersService } from '../../../services';\r\n\r\nconst getWifi = () => async (dispatch) => {\r\n  dispatch(getMarkersRequest());\r\n\r\n  try {\r\n    const { data } = await markersService.getWifi();\r\n    dispatch(getMarkersSuccess(data));\r\n  } catch (error) {\r\n    console.error(error);\r\n    dispatch(getMarkersError(error));\r\n  }\r\n};\r\n\r\n\r\nexport {\r\n  // eslint-disable-next-line import/prefer-default-export\r\n  getWifi,\r\n};\r\n","/* @flow */\r\nimport * as actions from './actions';\r\nimport reducer from './reducer';\r\nimport * as thunks from './thunks';\r\n\r\nexport {\r\n  actions,\r\n  reducer,\r\n  thunks,\r\n};\r\n\r\nexport default reducer;\r\n","/* @flow */\r\nimport { createActions } from 'redux-actions';\r\nimport { actions as toiletsActions } from './toilets';\r\nimport { actions as wifiActions } from './wifi';\r\n\r\nconst {\r\n  markers: {\r\n    setFilter,\r\n    setNewMarkerPosition,\r\n\r\n    getTypesRequest,\r\n    getTypesSuccess,\r\n    getTypesError,\r\n  },\r\n} = createActions({\r\n  MARKERS: {\r\n    SET_FILTER: (filter: string | null): {} => ({ filter }),\r\n    SET_NEW_MARKER_POSITION: (position: number[]) => ({ position }),\r\n\r\n    GET_TYPES_REQUEST: () => {},\r\n    GET_TYPES_SUCCESS: types => ({ types }),\r\n    GET_TYPES_ERROR: error => ({ error }),\r\n  },\r\n});\r\n\r\nexport {\r\n  setFilter,\r\n  setNewMarkerPosition,\r\n\r\n  getTypesRequest,\r\n  getTypesSuccess,\r\n  getTypesError,\r\n\r\n  toiletsActions,\r\n  wifiActions,\r\n};\r\n","/* @flow */\r\nimport { combineReducers } from 'redux';\r\nimport { handleActions } from 'redux-actions';\r\nimport * as markersActions from './actions';\r\nimport toilets from './toilets';\r\nimport wifi from './wifi';\r\n\r\nexport type State = {\r\n  +selected: string | null,\r\n  newMarkerPosition: number[] | null,\r\n\r\n  markerTypes: [],\r\n  isMarkerTypesFetching: boolean,\r\n  markerTypesError: any,\r\n};\r\n\r\nconst {\r\n  setFilter,\r\n  setNewMarkerPosition,\r\n\r\n  getTypesRequest,\r\n  getTypesSuccess,\r\n  getTypesError,\r\n} = markersActions;\r\n\r\nconst defaultState: State = {\r\n  selected: null,\r\n  newMarkerPosition: null,\r\n\r\n  markerTypes: [],\r\n  isMarkerTypesFetching: false,\r\n  markerTypesError: null,\r\n};\r\n\r\nconst reducer = handleActions({\r\n  [setFilter]: (state: State, { payload: { filter } }) => ({\r\n    ...state,\r\n    selected: filter,\r\n  }),\r\n  [setNewMarkerPosition]: (state: State, { payload: { position } }) => ({\r\n    ...state,\r\n    newMarkerPosition: position,\r\n  }),\r\n\r\n  [getTypesRequest]: (state: State) => ({\r\n    ...state,\r\n    isMarkerTypesFetching: true,\r\n    markerTypesError: defaultState.markerTypesError,\r\n  }),\r\n  [getTypesSuccess]: (state: State, { payload: { types } }) => ({\r\n    ...state,\r\n    isMarkerTypesFetching: false,\r\n    markerTypes: types,\r\n  }),\r\n  [getTypesError]: (state: State, { payload: { error } }) => ({\r\n    ...state,\r\n    isMarkerTypesFetching: false,\r\n    markerTypesError: error,\r\n  }),\r\n}, defaultState);\r\n\r\n\r\nexport default combineReducers({\r\n  shared: reducer,\r\n  toilets,\r\n  wifi,\r\n});\r\n","/* @flow */\r\nimport { createActions } from 'redux-actions';\r\n\r\ntype Actions = {\r\n  user: {\r\n    setCurrentLocation: (locationOrError: [] | {}) => void,\r\n  },\r\n};\r\n\r\nconst { user }: Actions = createActions({\r\n  USER: {\r\n    SET_CURRENT_LOCATION: (locationOrError: [] | {}) => {\r\n      if (!locationOrError.length) {\r\n        return {\r\n          error: true,\r\n          geolocationErrorCode: locationOrError.code,\r\n          currentLocation: null,\r\n        };\r\n      }\r\n      return { currentLocation: locationOrError };\r\n    },\r\n  },\r\n});\r\n\r\nexport default user;\r\n","/* @flow */\r\nexport const selectUserCurrentLocation = (state: any) => state.user.currentLocation;\r\n\r\nexport const selectUserCurrentLocationError = (state: any) => state.user.locationError;\r\n","/* @flow */\r\nimport { handleActions } from 'redux-actions';\r\nimport update from 'immutability-helper';\r\nimport actions from './actions';\r\n\r\nconst {\r\n  setCurrentLocation,\r\n} = actions;\r\n\r\ntype State = {\r\n  currentLocation: [] | null,\r\n  locationError: string | null,\r\n}\r\n\r\nconst defaultState: State = {\r\n  currentLocation: null,\r\n  locationError: null,\r\n};\r\n\r\nconst reducer = handleActions({\r\n  [setCurrentLocation.toString()]: (state: State, { payload: { currentLocation } }) => {\r\n    return update(state, {\r\n      currentLocation: {\r\n        $set: currentLocation,\r\n      },\r\n    });\r\n  },\r\n}, defaultState);\r\n\r\nexport default reducer;\r\n","import userActions from './actions';\r\nimport * as selectors from './selectors';\r\nimport * as thunks from './thunks';\r\nimport reducer from './reducer';\r\n\r\nexport {\r\n  userActions,\r\n  selectors,\r\n  thunks,\r\n};\r\n\r\nexport default reducer;\r\n","/* @flow */\r\nimport { createSelector } from 'reselect';\r\nimport { selectors as userSelectors } from '../user';\r\nimport type { Wifi } from '../../types/models';\r\nimport type { State } from './reducer';\r\n\r\ntype Selector = (state: {}) => any;\r\n\r\nconst rootSelector: Selector = (state): State => state.markers;\r\n\r\nexport const selectWifi: Selector = createSelector(\r\n  rootSelector,\r\n  (markers: State): Wifi[] => markers.wifi.markers,\r\n);\r\n\r\nexport const selectToilets: Selector = createSelector(\r\n  rootSelector,\r\n  (markers: State) => markers.toilets.markers,\r\n);\r\n\r\nexport const selectIsAllMarkersFetching: Selector = createSelector(\r\n  rootSelector,\r\n  (markers: State): boolean => {\r\n    return (\r\n      markers.wifi.isFetching\r\n    || markers.toilets.isFetching\r\n    );\r\n  },\r\n);\r\n\r\nexport const selectFilter: Selector = createSelector(\r\n  rootSelector,\r\n  (markers: State) => markers.shared.selected,\r\n);\r\n\r\nconst selectNewMarkerPosition = state => state.markers.shared.newMarkerPosition;\r\n\r\nexport const selectNewMarkerPositionInGeoJSON = createSelector(\r\n  [selectNewMarkerPosition, userSelectors.selectUserCurrentLocation],\r\n  (position, userPosition) => {\r\n    if (!position) {\r\n      return {\r\n        type: 'Point',\r\n        coordinates: userPosition,\r\n      };\r\n    }\r\n\r\n    return {\r\n      type: 'Point',\r\n      coordinates: [position.lat, position.lng],\r\n    };\r\n  },\r\n);\r\n","import {\r\n  getTypesRequest,\r\n  getTypesSuccess,\r\n  getTypesError,\r\n} from './actions';\r\nimport { thunks as toiletsThunks } from './toilets';\r\nimport { thunks as wifiThunks } from './wifi';\r\nimport { markersService } from '../../services';\r\n\r\nconst { getWifi } = wifiThunks;\r\nconst { getToilets } = toiletsThunks;\r\n\r\nexport const getMarkers = () => async (dispatch) => {\r\n  await Promise.all([\r\n    dispatch(getWifi()),\r\n    dispatch(getToilets()),\r\n  ]);\r\n};\r\n\r\nexport const getMarkerTypes = () => async (dispatch) => {\r\n  dispatch(getTypesRequest());\r\n\r\n  try {\r\n    const { data } = await markersService.getMarkerTypes();\r\n    dispatch(getTypesSuccess(data));\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch(getTypesError(e));\r\n  }\r\n};\r\n\r\nexport {\r\n  wifiThunks,\r\n  toiletsThunks,\r\n};\r\n","/* @flow */\r\n\r\nimport * as actions from './actions';\r\nimport reducer from './reducer';\r\nimport * as selectors from './selectors';\r\nimport * as thunks from './thunks';\r\n\r\nexport {\r\n  actions,\r\n  reducer,\r\n  selectors,\r\n  thunks,\r\n};\r\n\r\nexport default reducer;\r\n","/* @flow */\r\nimport { createActions } from 'redux-actions';\r\n\r\nconst {\r\n  feedback: {\r\n    createFeedbackRequest,\r\n    createFeedbackSuccess,\r\n    createFeedbackError,\r\n  },\r\n} = createActions({\r\n  FEEDBACK: {\r\n    CREATE_FEEDBACK_REQUEST: (): void => {},\r\n    CREATE_FEEDBACK_SUCCESS: (): void => {},\r\n    CREATE_FEEDBACK_ERROR: (error: any): { error: any } => ({ error }),\r\n  },\r\n});\r\n\r\nexport {\r\n  createFeedbackRequest,\r\n  createFeedbackSuccess,\r\n  createFeedbackError,\r\n};\r\n","/* @flow */\r\nimport { handleActions } from 'redux-actions';\r\nimport {\r\n  createFeedbackRequest,\r\n  createFeedbackSuccess,\r\n  createFeedbackError,\r\n} from './actions';\r\n\r\ntype State = {\r\n  isLoading: boolean,\r\n  error?: {},\r\n};\r\n\r\nconst defaultState: State = {\r\n  feedback: [],\r\n  error: {},\r\n  isLoading: false,\r\n};\r\n\r\nconst reducer = handleActions({\r\n  [createFeedbackRequest]: (state: State) => ({\r\n    ...state,\r\n    isLoading: true,\r\n  }),\r\n  [createFeedbackSuccess]: (state: State) => ({\r\n    ...state,\r\n    isLoading: false,\r\n  }),\r\n  [createFeedbackError]: (state: State, { payload: { error } }) => ({\r\n    ...state,\r\n    isLoading: false,\r\n    error,\r\n  }),\r\n}, defaultState);\r\n\r\nexport default reducer;\r\n","/* @flow */\r\nimport { feedbackService } from '../../services';\r\nimport {\r\n  createFeedbackRequest,\r\n  createFeedbackSuccess,\r\n  createFeedbackError,\r\n} from './actions';\r\nimport type { Feedback } from '../../types/models';\r\n\r\nconst createFeedback = (feedback: Feedback) => async (dispatch) => {\r\n  dispatch(createFeedbackRequest());\r\n\r\n  try {\r\n    await feedbackService.createFeedback(feedback);\r\n    dispatch(createFeedbackSuccess());\r\n  } catch (error) {\r\n    console.error(error);\r\n    dispatch(createFeedbackError(error));\r\n  }\r\n};\r\n\r\nexport {\r\n  createFeedback,\r\n};\r\n","/* @flow */\r\n\r\nimport * as actions from './actions';\r\nimport reducer from './reducer';\r\nimport * as selectors from './selectors';\r\nimport * as thunks from './thunks';\r\n\r\nexport {\r\n  actions,\r\n  reducer,\r\n  selectors,\r\n  thunks,\r\n};\r\n\r\nexport default reducer;\r\n","/* @flow */\r\nimport { createActions } from 'redux-actions';\r\n\r\nconst {\r\n  routing: {\r\n    getRouteRequest,\r\n    getRouteSuccess,\r\n    getRouteError,\r\n\r\n    resetRoute,\r\n  },\r\n} = createActions({\r\n  ROUTING: {\r\n    GET_ROUTE_REQUEST: marker => ({ marker }),\r\n    GET_ROUTE_SUCCESS: route => ({ route }),\r\n    GET_ROUTE_ERROR: error => ({ error }),\r\n\r\n    RESET_ROUTE: () => {},\r\n  },\r\n});\r\n\r\nexport {\r\n  getRouteRequest,\r\n  getRouteSuccess,\r\n  getRouteError,\r\n\r\n  resetRoute,\r\n};\r\n","/* @flow */\r\nimport { handleActions } from 'redux-actions';\r\nimport update from 'immutability-helper';\r\nimport {\r\n  getRouteRequest,\r\n  getRouteSuccess,\r\n  getRouteError,\r\n  resetRoute,\r\n} from './actions';\r\nimport { actions as markersActions } from '../markers';\r\n\r\ntype State = {\r\n  selectedMarker: any,\r\n  route: any,\r\n  isFetching: boolean,\r\n  error: any,\r\n};\r\n\r\nconst defaultState: State = {\r\n  marker: null,\r\n  route: null,\r\n  isFetching: false,\r\n  error: null,\r\n};\r\n\r\nconst reducer = handleActions({\r\n  [getRouteRequest]: (state: State, { payload: { marker } }) => update(state, {\r\n    marker: { $set: marker },\r\n    isFetching: { $set: true },\r\n    error: { $set: defaultState.error },\r\n  }),\r\n  [getRouteSuccess]: (state: State, { payload: { route } }) => update(state, {\r\n    isFetching: { $set: false },\r\n    route: { $set: route },\r\n  }),\r\n  [getRouteError]: (state: State, { payload: { error } }) => update(state, {\r\n    isFetching: { $set: false },\r\n    error: { $set: error },\r\n  }),\r\n  [resetRoute]: (state: State) => update(state, { route: { $set: null } }),\r\n  [markersActions.setFilter]: (state: State, { payload: { filter } }) => {\r\n    return !filter\r\n      ? state\r\n      : update(state, {\r\n        error: {\r\n          $set: null,\r\n        },\r\n        route: {\r\n          $set: null,\r\n        },\r\n      });\r\n  },\r\n}, defaultState);\r\n\r\nexport default reducer;\r\n","/* @flow */\r\nimport { createSelector } from 'reselect';\r\n\r\nconst selectRouting = state => state.routing.route;\r\nconst selectMarkerForRouting = state => state.routing.marker;\r\n\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const selectRoute = createSelector(\r\n  selectRouting,\r\n  (route) => {\r\n    return route ? route.leg : null;\r\n  },\r\n);\r\n\r\nexport const selectRouteSummary = createSelector(\r\n  [selectRouting, selectMarkerForRouting],\r\n  (route, marker) => (route ? { summary: route.summary, marker } : null),\r\n);\r\n","/* @flow */\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const getFormattedRoute = ({ response }) => {\r\n  const { route } = response;\r\n  const { leg, summary } = route[0];\r\n\r\n  return { leg: leg[0], summary };\r\n};\r\n","/* @flow */\r\nimport {\r\n  getRouteRequest,\r\n  getRouteSuccess,\r\n  getRouteError,\r\n} from './actions';\r\nimport { routingService } from '../../services';\r\nimport { getFormattedRoute } from './helpers';\r\n\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const getRoute = (userLocation, marker) => async (dispatch) => {\r\n  const { location } = marker;\r\n  dispatch(getRouteRequest(marker));\r\n\r\n  try {\r\n    const data = await routingService.getRoute(userLocation, location);\r\n    const route = getFormattedRoute(data.data);\r\n\r\n    dispatch(getRouteSuccess(route));\r\n  } catch (error) {\r\n    dispatch(getRouteError(error));\r\n  }\r\n};\r\n","/* @flow */\r\n\r\nimport { combineReducers } from 'redux';\r\nimport ui from './reducers/ui';\r\nimport markers from './markers';\r\nimport feedback from './feedback';\r\nimport user from './user';\r\nimport routing from './routing';\r\nimport shared from './shared';\r\n\r\ntype State = {\r\n  user: any,\r\n  ui: any,\r\n  markers: any,\r\n  feedback: any,\r\n  routing: any,\r\n  errors: any,\r\n};\r\n\r\nconst reducers: State = {\r\n  user,\r\n  ui,\r\n  markers,\r\n  feedback,\r\n  routing,\r\n  shared,\r\n};\r\n\r\nexport default combineReducers(reducers);\r\n","/* @flow */\r\n\r\nimport * as routingActions from './actions';\r\nimport reducer from './reducer';\r\nimport * as selectors from './selectors';\r\nimport * as thunks from './thunks';\r\n\r\nexport {\r\n  routingActions,\r\n  reducer,\r\n  selectors,\r\n  thunks,\r\n};\r\n\r\nexport default reducer;\r\n","export const MAX_SNACK = 3;\r\nexport const ANCHOR = {\r\n  vertical: 'bottom',\r\n  horizontal: 'right',\r\n};\r\n","import { createMuiTheme } from '@material-ui/core';\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#f4c844',\r\n    },\r\n    secondary: {\r\n      main: '#e53935',\r\n    },\r\n  },\r\n  typography: { useNextVariants: true },\r\n});\r\n\r\nexport default theme;\r\n","/* @flow */\r\n\r\nexport const markerIcon: number[] = [25, 37];\r\n\r\nexport const userMarkerIcon: number[] = [25, 25];\r\n","/* @flow */\r\nimport L from 'leaflet';\r\nimport type { Icon } from 'leaflet';\r\nimport { toilet } from '../../styles/images';\r\nimport { markerIcon } from '../../styles/sizes';\r\nimport type { IconOptions } from '../../types/markers';\r\n\r\nconst options: IconOptions = {\r\n  iconUrl: toilet,\r\n  iconSize: markerIcon,\r\n};\r\n\r\nconst icon: Icon = new L.Icon(options);\r\n\r\nexport default icon;\r\n","import Marker from './marker';\r\n\r\nexport default Marker;\r\n","/* @flow */\r\nimport * as React from 'react';\r\nimport { Marker, Popup } from 'react-leaflet';\r\nimport { withStyles, IconButton } from '@material-ui/core';\r\nimport { Directions as RouteIcon } from '@material-ui/icons';\r\nimport icon from './icon';\r\nimport styles from './styles';\r\nimport type { Toilet } from '../../types/models';\r\nimport type { Classes } from '../../types/styles';\r\n\r\ntype Props = {\r\n  classes: Classes,\r\n  toilet: Toilet,\r\n  buildRoute: (any) => void,\r\n};\r\n\r\nconst ToiletMarker = ({ toilet, classes, buildRoute }: Props) => {\r\n  return (\r\n    <Marker\r\n      icon={icon}\r\n      position={toilet.location}\r\n      onDblclick={() => { buildRoute(toilet)(); }}\r\n    >\r\n      <Popup autoPan={false}>\r\n        <div className={classes.content}>\r\n          <span className={classes.title}>Туалет</span>\r\n          <IconButton\r\n            disableRipple\r\n            className={classes.routeButton}\r\n            onClick={buildRoute(toilet)}\r\n          >\r\n            <RouteIcon />\r\n          </IconButton>\r\n          <br />\r\n          <br />\r\n          <span className={classes.point}>Адрес: </span>\r\n          <span>{toilet.address}</span>\r\n          <br />\r\n          <br />\r\n          <span className={classes.point}>Описание: </span>\r\n          <span>{toilet.description || 'Отсутствует'}</span>\r\n        </div>\r\n      </Popup>\r\n    </Marker>\r\n  );\r\n};\r\n\r\nexport default withStyles(styles)(ToiletMarker);\r\n","/* @flow */\r\nimport type { Styles } from '../../types/styles';\r\n\r\nexport default (): Styles => ({\r\n  routeButton: {\r\n    paddingTop: 0,\r\n    paddingBottom: 0,\r\n    '&:hover': {\r\n      backgroundColor: 'transparent',\r\n    },\r\n  },\r\n  content: {\r\n    width: 250,\r\n    fontSize: 13,\r\n  },\r\n  point: {\r\n    fontWeight: 'bold',\r\n  },\r\n  title: {\r\n    fontWeight: 'bold',\r\n  },\r\n});\r\n","/* @flow */\r\nimport L from 'leaflet';\r\nimport type { Icon } from 'leaflet';\r\nimport { wifi } from '../../styles/images';\r\nimport { markerIcon } from '../../styles/sizes';\r\nimport type { IconOptions } from '../../types/markers';\r\n\r\nconst options: IconOptions = {\r\n  iconUrl: wifi,\r\n  iconSize: markerIcon,\r\n};\r\n\r\nconst icon: Icon = new L.Icon(options);\r\n\r\nexport default icon;\r\n","import Marker from './marker';\r\n\r\nexport default Marker;\r\n","/* @flow */\r\nimport * as React from 'react';\r\nimport { Marker, Popup } from 'react-leaflet';\r\nimport { withStyles, IconButton } from '@material-ui/core';\r\nimport { Directions as RouteIcon } from '@material-ui/icons';\r\nimport icon from './icon';\r\nimport styles from './styles';\r\nimport type { Wifi } from '../../types/models';\r\nimport type { Classes } from '../../types/styles';\r\n\r\ntype Props = {\r\n  classes: Classes,\r\n  wifi: Wifi,\r\n  buildRoute: (location: number[]) => void,\r\n};\r\n\r\nconst WifiMarker = ({ wifi, classes, buildRoute }: Props) => {\r\n  return (\r\n    <Marker\r\n      icon={icon}\r\n      position={wifi.location}\r\n      onDblclick={() => { buildRoute(wifi)(); }}\r\n    >\r\n      <Popup autoPan={false}>\r\n        <div className={classes.content}>\r\n          <span className={classes.point}>Название: </span>\r\n          <span className={classes.title}>\r\n            {wifi.title}\r\n          </span>\r\n          <IconButton\r\n            disableRipple\r\n            className={classes.routeButton}\r\n            onClick={buildRoute(wifi)}\r\n          >\r\n            <RouteIcon />\r\n          </IconButton>\r\n          <br />\r\n          <br />\r\n          <span className={classes.point}>Адрес: </span>\r\n          <span>\r\n            {wifi.address}\r\n          </span>\r\n          <br />\r\n          <br />\r\n          <span className={classes.point}>Описание: </span>\r\n          <span>\r\n            {wifi.description}\r\n          </span>\r\n        </div>\r\n      </Popup>\r\n    </Marker>\r\n  );\r\n};\r\n\r\nexport default withStyles(styles)(WifiMarker);\r\n","/* @flow */\r\nimport type { Styles } from '../../types/styles';\r\n\r\nexport default (): Styles => ({\r\n  routeButton: {\r\n    paddingTop: 0,\r\n    paddingBottom: 0,\r\n    '&:hover': {\r\n      backgroundColor: 'transparent',\r\n    },\r\n  },\r\n  content: {\r\n    width: 250,\r\n    fontSize: 13,\r\n  },\r\n  point: {\r\n    fontWeight: 'bold',\r\n  },\r\n  title: {\r\n    fontWeight: 'bold',\r\n  },\r\n});\r\n","/* @flow */\r\nimport L from 'leaflet';\r\nimport type { Icon } from 'leaflet';\r\nimport { userMarker } from '../../styles/images';\r\nimport { userMarkerIcon } from '../../styles/sizes';\r\nimport type { IconOptions } from '../../types/markers';\r\n\r\nconst options: IconOptions = {\r\n  iconUrl: userMarker,\r\n  iconSize: userMarkerIcon,\r\n};\r\n\r\nconst icon: Icon = new L.Icon(options);\r\n\r\nexport default icon;\r\n","import Marker from './marker';\r\n\r\nexport default Marker;\r\n","/* @flow */\r\nimport * as React from 'react';\r\nimport { Marker } from 'react-leaflet';\r\nimport icon from './icon';\r\n\r\ntype Props = {\r\n  location: [],\r\n};\r\n\r\nconst UserMarker = ({ location }: Props) => {\r\n  return (\r\n    <Marker\r\n      icon={icon}\r\n      zIndexOffset={10000}\r\n      position={location}\r\n    />\r\n  );\r\n};\r\n\r\nexport default UserMarker;\r\n","import Button from './button';\r\n\r\nexport default Button;\r\n","/* @flow */\r\nimport React from 'react';\r\nimport { Fab } from '@material-ui/core';\r\nimport { MyLocation as MyLocationIcon } from '@material-ui/icons';\r\n\r\ntype Props = {\r\n  onClick: () => void,\r\n};\r\n\r\nconst UserLocationButton = ({ onClick }: Props) => {\r\n  return (\r\n    <Fab\r\n      color=\"primary\"\r\n      onClick={onClick}\r\n    >\r\n      <MyLocationIcon color=\"inherit\" />\r\n    </Fab>\r\n  );\r\n};\r\n\r\nexport default UserLocationButton;\r\n","/* @flow */\r\nimport type { Styles } from '../../types/styles';\r\n\r\nconst styles = (theme: any): Styles => ({\r\n  filter: {\r\n  },\r\n  drop: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  button: {\r\n  },\r\n  open: {\r\n    display: 'flex',\r\n  },\r\n  close: {\r\n    display: 'none',\r\n  },\r\n  mainButton: {\r\n  },\r\n  optionButton: {\r\n    marginTop: 15,\r\n  },\r\n  '@media only screen and (min-width: 768px)': {\r\n    filter: {\r\n      top: '2%',\r\n      left: '2%',\r\n    },\r\n  },\r\n});\r\n\r\nexport default styles;\r\n","/* @flow */\r\nimport * as React from 'react';\r\nimport type { ElementType } from 'react';\r\nimport cc from 'classcat';\r\nimport { Fab, withStyles } from '@material-ui/core';\r\nimport styles from './styles';\r\n\r\nimport type { Classes } from '../../types/styles';\r\n\r\ntype Props = {\r\n  filter: string | null,\r\n  onClick: (filter: string | null) => () => void,\r\n  classes: Classes,\r\n  Icon: ElementType,\r\n  isSelected: boolean,\r\n};\r\n\r\nconst Option = ({\r\n  Icon,\r\n  filter,\r\n  onClick,\r\n  classes,\r\n  isSelected,\r\n}: Props) => {\r\n  return (\r\n    <Fab\r\n      className={cc([classes.button, classes.optionButton])}\r\n      color={isSelected ? 'primary' : 'default'}\r\n      onClick={onClick(filter)}\r\n      size=\"small\"\r\n    >\r\n      <Icon />\r\n    </Fab>\r\n  );\r\n};\r\n\r\nexport default withStyles(styles)(Option);\r\n","/* @flow */\r\nimport React, { Component } from 'react';\r\nimport { withStyles, Fab } from '@material-ui/core';\r\nimport {\r\n  FilterList,\r\n  Wc as WcIcon,\r\n  Wifi as WifiIcon,\r\n  ClearAll as ClearAllIcon,\r\n} from '@material-ui/icons';\r\nimport cc from 'classcat';\r\nimport Option from './option';\r\nimport styles from './styles';\r\nimport type { Classes } from '../../types/styles';\r\n\r\ntype Props = {\r\n  classes: Classes,\r\n  selectedFilter: string,\r\n  setFilter: (filter: string | null) => void,\r\n};\r\n\r\ntype State = {\r\n  open: boolean,\r\n};\r\n\r\nconst WcOptionIcon = () => <WcIcon color=\"inherit\" />;\r\nconst WifiOptionIcon = () => <WifiIcon color=\"inherit\" />;\r\nconst ClearAllOptionIcon = () => <ClearAllIcon color=\"inherit\" />;\r\n\r\nclass FilterButton extends Component<Props, State> {\r\n  state = {\r\n    open: false,\r\n  };\r\n\r\n  onFilterClick = (filter: string | null) => () => {\r\n    const { setFilter } = this.props;\r\n\r\n    setFilter(filter);\r\n  };\r\n\r\n  toggle = () => this.setState((prevState: State) => ({ open: !prevState.open }))\r\n\r\n  render() {\r\n    const { classes, selectedFilter } = this.props;\r\n    const { open } = this.state;\r\n\r\n    return (\r\n      <div className={cc([classes.filter])}>\r\n        <Fab\r\n          className={cc([classes.button, classes.mainButton])}\r\n          color=\"primary\"\r\n          onClick={this.toggle}\r\n        >\r\n          <FilterList color=\"inherit\" />\r\n        </Fab>\r\n        <div className={cc([(open ? classes.open : classes.close), classes.drop])}>\r\n          <Option\r\n            isSelected={selectedFilter === null}\r\n            filter={null}\r\n            onClick={this.onFilterClick}\r\n            Icon={ClearAllOptionIcon}\r\n          />\r\n          <Option\r\n            isSelected={selectedFilter === 'toilet'}\r\n            filter=\"toilet\"\r\n            onClick={this.onFilterClick}\r\n            Icon={WcOptionIcon}\r\n          />\r\n          <Option\r\n            isSelected={selectedFilter === 'wifi'}\r\n            filter=\"wifi\"\r\n            onClick={this.onFilterClick}\r\n            Icon={WifiOptionIcon}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(FilterButton);\r\n","import Button from './button';\r\n\r\nexport default Button;\r\n","/* @flow */\r\nimport { createMuiTheme } from '@material-ui/core';\r\nimport type { Theme } from '@material-ui/core';\r\nimport type { Styles } from '../../types/styles';\r\n\r\nconst sideMargin = 12;\r\nconst sidebarDesctopSize = 340;\r\n\r\nexport default (theme: Theme): Styles => ({\r\n  sidebarRoot: {\r\n    width: '100%',\r\n    overflowX: 'hidden',\r\n  },\r\n  sidebarTitle: {\r\n    padding: 16,\r\n    paddingBottom: 0,\r\n  },\r\n  sidebarTitleContent: {\r\n    fontFamily: \"'Roboto Condensed', Arial, Helvetica, sans-serif\",\r\n    fontWeight: 'bold',\r\n  },\r\n  fieldsContainer: {\r\n    margin: 0,\r\n  },\r\n  formField: {\r\n    margin: sideMargin,\r\n    width: '93%',\r\n  },\r\n  buttonsContainer: {\r\n    display: 'flex',\r\n    justifyContent: 'space-around',\r\n  },\r\n  [theme.breakpoints.up('sm')]: {\r\n    sidebarRoot: {\r\n      width: sidebarDesctopSize,\r\n    },\r\n  },\r\n});\r\n\r\nexport const theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: '#4caf50',\r\n      contrastText: '#fff',\r\n    },\r\n    secondary: {\r\n      main: '#d14942',\r\n    },\r\n  },\r\n});\r\n","/* @flow */\r\nimport * as React from 'react';\r\nimport {\r\n  withStyles, SwipeableDrawer, Grid,\r\n  Button, TextField, Select, MenuItem,\r\n  FormControl, InputLabel, Typography,\r\n  MuiThemeProvider,\r\n} from '@material-ui/core';\r\nimport styles, { theme } from './styles';\r\nimport type { Classes } from '../../types/styles';\r\nimport type { Feedback } from '../../types/models';\r\n\r\ntype Props = {\r\n  +isOpen: boolean,\r\n  feedback: Feedback,\r\n  freebeeTypes: [],\r\n  +classes: Classes,\r\n  open: () => void,\r\n  close: () => void,\r\n  +cancel: () => void,\r\n  +submit: () => void,\r\n  handleFieldChange: (fields: string) => void,\r\n};\r\n\r\nconst FeedbackSidebar = ({\r\n  feedback,\r\n  freebeeTypes,\r\n  isOpen,\r\n  classes,\r\n  open,\r\n  close,\r\n  cancel,\r\n  submit,\r\n  handleFieldChange,\r\n}: Props) => (\r\n  <MuiThemeProvider theme={theme}>\r\n    <SwipeableDrawer\r\n      open={isOpen}\r\n      onClose={close}\r\n      onOpen={open}\r\n      anchor=\"left\"\r\n      classes={{\r\n        paper: classes.sidebarRoot,\r\n      }}\r\n    >\r\n      <Grid container>\r\n        <Grid item xs={12}>\r\n          <div className={classes.sidebarTitle}>\r\n            <Typography\r\n              className={classes.sidebarTitleContent}\r\n              variant=\"headline\"\r\n              gutterBottom\r\n              align=\"center\"\r\n            >\r\n              {'Поделитесь халявой с другими!'}\r\n            </Typography>\r\n          </div>\r\n        </Grid>\r\n        <Grid className={classes.fieldsContainer} container spacing={24}>\r\n          <Grid item xs={12}>\r\n            <FormControl fullWidth className={classes.formField}>\r\n              <TextField\r\n                placeholder=\"ул. Халявина, 7\"\r\n                label=\"Место халявы\"\r\n                required\r\n                onChange={handleFieldChange('address')}\r\n                value={feedback.address}\r\n                InputLabelProps={{\r\n                  shrink: true,\r\n                }}\r\n                fullWidth\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <FormControl required fullWidth className={classes.formField}>\r\n              <InputLabel htmlFor=\"freebeeType\">Вид халявы</InputLabel>\r\n              <Select\r\n                onChange={handleFieldChange('type')}\r\n                value={feedback.type}\r\n                inputProps={{\r\n                  id: 'freebeeType',\r\n                  name: 'freebeeType',\r\n                }}\r\n                fullWidth\r\n              >\r\n                {freebeeTypes.map(type => (\r\n                  <MenuItem key={type.value} value={type.value}>\r\n                    {type.label}\r\n                  </MenuItem>\r\n                ))}\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <FormControl fullWidth className={classes.formField}>\r\n              <TextField\r\n                placeholder=\"Автор\"\r\n                label=\"Freebee\"\r\n                required\r\n                onChange={handleFieldChange('author')}\r\n                value={feedback.author}\r\n                InputLabelProps={{\r\n                  shrink: true,\r\n                }}\r\n                fullWidth\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <FormControl fullWidth className={classes.formField}>\r\n              <TextField\r\n                placeholder=\"Описание найденной халявы\"\r\n                label=\"Описание\"\r\n                onChange={handleFieldChange('description')}\r\n                value={feedback.description}\r\n                InputLabelProps={{\r\n                  shrink: true,\r\n                }}\r\n                fullWidth\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Grid container className={classes.buttonsContainer}>\r\n              <Button onClick={cancel} variant=\"contained\" color=\"secondary\">Отменить</Button>\r\n              <Button variant=\"contained\" type=\"submit\" color=\"primary\" onClick={submit}>Отправить</Button>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </SwipeableDrawer>\r\n  </MuiThemeProvider>\r\n);\r\n\r\nexport default withStyles(styles)(FeedbackSidebar);\r\n","/* @flow */\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport FeedbackSidebar from './sidebar';\r\nimport { MAP_MODES } from '../../config/map';\r\n\r\nimport { close, open } from '../../redux/actions/ui/feedback-sidebar';\r\nimport { thunks } from '../../redux/feedback';\r\nimport { selectors as markersSelectors } from '../../redux/markers';\r\nimport { sharedActions } from '../../redux/shared';\r\n\r\nimport type { Feedback } from '../../types/models';\r\n\r\ntype Props = {\r\n  closeSidebar: () => void,\r\n  setReadMapMode: () => void,\r\n  openSidebar: () => void,\r\n  sendFeedback: () => void,\r\n  isOpen: boolean,\r\n  location: any,\r\n  freebeeTypes: [],\r\n};\r\n\r\ntype State = {\r\n  address: string,\r\n  type: string[],\r\n  author: string,\r\n  description?: string,\r\n};\r\n\r\nconst defaultState = {\r\n  address: '',\r\n  type: [''],\r\n  author: '',\r\n  description: '',\r\n};\r\n\r\nclass FeedbackSidebarContainer extends Component<Props, State> {\r\n  state = defaultState;\r\n\r\n  componentDidUpdate() {\r\n    if (this.state.type === defaultState.type\r\n    && this.props.freebeeTypes.length !== 0) {\r\n      this.setState({ type: this.props.freebeeTypes[0].value });\r\n    }\r\n  }\r\n\r\n  handleFieldChange = (name: string) => (e: Event) => {\r\n    this.setState({\r\n      [name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  handleSubmit = (): void => {\r\n    const {\r\n      closeSidebar,\r\n      sendFeedback,\r\n      setReadMapMode,\r\n      location,\r\n    } = this.props;\r\n\r\n    const {\r\n      type,\r\n      address,\r\n      author,\r\n      description,\r\n    } = this.state;\r\n\r\n    const feedback: Feedback = {\r\n      location,\r\n      address,\r\n      type: type.toString(),\r\n      author,\r\n      description,\r\n    };\r\n\r\n    sendFeedback(feedback);\r\n    setReadMapMode();\r\n    closeSidebar();\r\n    this.setState({ ...defaultState });\r\n  };\r\n\r\n  handleCancel = (): void => {\r\n    const { closeSidebar, setReadMapMode } = this.props;\r\n\r\n    setReadMapMode();\r\n    closeSidebar();\r\n    this.setState({ ...defaultState });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      isOpen, closeSidebar, openSidebar, freebeeTypes,\r\n    } = this.props;\r\n\r\n    const {\r\n      address,\r\n      author,\r\n      type,\r\n      description,\r\n    } = this.state;\r\n\r\n    if (freebeeTypes.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    const feedback: Feedback = {\r\n      address,\r\n      author,\r\n      type,\r\n      description,\r\n    };\r\n\r\n    return (\r\n      <FeedbackSidebar\r\n        feedback={feedback}\r\n        freebeeTypes={freebeeTypes}\r\n        isOpen={isOpen}\r\n        close={closeSidebar}\r\n        open={openSidebar}\r\n        submit={this.handleSubmit}\r\n        cancel={this.handleCancel}\r\n        handleFieldChange={this.handleFieldChange}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst { createFeedback } = thunks;\r\n\r\nconst mapState = state => ({\r\n  isOpen: state.ui.feedbackSidebar.open,\r\n  location: markersSelectors.selectNewMarkerPositionInGeoJSON(state),\r\n  freebeeTypes: state.markers.shared.markerTypes,\r\n});\r\n\r\nconst mapDispatch = {\r\n  closeSidebar: close,\r\n  openSidebar: open,\r\n  sendFeedback: createFeedback,\r\n  setReadMapMode: () => sharedActions.setMapMode(MAP_MODES.READ),\r\n};\r\n\r\nexport default connect(mapState, mapDispatch)(FeedbackSidebarContainer);\r\n","import FeedbackSidebar from './container';\r\n\r\nexport default FeedbackSidebar;\r\n","/* @flow */\r\n\r\nconst getFlatPosition = (location) => {\r\n  const { latitude, longitude } = location;\r\n\r\n  return [latitude, longitude];\r\n};\r\n\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const getPositionsForPolyline = (route: any): Array<number[]> => {\r\n  if (!route) {\r\n    return [];\r\n  }\r\n\r\n  const buildedRoutes: Array<number[]> = route.maneuver.map(\r\n    ({ position }) => getFlatPosition(position),\r\n  );\r\n\r\n  const startPosition = getFlatPosition(route.start.originalPosition);\r\n  const endPosition = getFlatPosition(route.end.originalPosition);\r\n\r\n  return [startPosition, ...buildedRoutes, endPosition];\r\n};\r\n","/* @flow */\r\nimport L from 'leaflet';\r\nimport type { Icon } from 'leaflet';\r\nimport { newMarker } from '../../styles/images';\r\nimport { markerIcon } from '../../styles/sizes';\r\nimport type { IconOptions } from '../../types/markers';\r\n\r\nconst options: IconOptions = {\r\n  iconUrl: newMarker,\r\n  iconSize: markerIcon,\r\n};\r\n\r\nconst icon: Icon = new L.Icon(options);\r\n\r\nexport default icon;\r\n","/* @flow */\r\nimport React, { Component, createRef } from 'react';\r\nimport { withStyles } from '@material-ui/core';\r\nimport {\r\n  Map,\r\n  TileLayer,\r\n  FeatureGroup,\r\n  Polyline,\r\n  Marker,\r\n} from 'react-leaflet';\r\nimport {\r\n  ToiletMarker, WifiMarker, UserMarker,\r\n} from '../../components';\r\n\r\nimport { getPositionsForPolyline } from './helpers';\r\nimport {\r\n  MAP_MODES,\r\n  TILE_LAYER_URL,\r\n  MAP_ATTRIBUTION,\r\n} from '../../config/map';\r\n\r\nimport styles, { ROUTE_COLOR } from './styles';\r\nimport 'leaflet/dist/leaflet.css';\r\n\r\nimport type { Classes } from '../../types/styles';\r\nimport type { Wifi, Toilet } from '../../types/models';\r\nimport icon from '../../components/NewMarker/icon';\r\n\r\ntype Props = {\r\n  classes: Classes,\r\n  wifi?: Wifi[],\r\n  userLocation: number[] | null,\r\n  toilets?: Toilet[],\r\n  route: any,\r\n  mapMode: string,\r\n  buildRoute: (location: number[]) => void,\r\n  setNewMarkerPosition: (position: number[]) => void,\r\n};\r\n\r\ntype State = {\r\n  viewport: any,\r\n};\r\n\r\nclass FreebeeMap extends Component<Props, State> {\r\n  static defaultProps = {\r\n    wifi: [],\r\n    toilets: [],\r\n  };\r\n\r\n  refNewMarker = createRef();\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { userLocation } = this.props;\r\n    const map = this.map.leafletElement;\r\n\r\n    if (userLocation !== null\r\n    && prevProps.userLocation !== userLocation\r\n    ) {\r\n      map.panTo(userLocation);\r\n    }\r\n  }\r\n\r\n  setMapRef = (element) => {\r\n    this.map = element;\r\n  };\r\n\r\n  updateNewMarkerPosition = () => {\r\n    const marker = this.refNewMarker.current;\r\n    if (marker != null) {\r\n      this.props.setNewMarkerPosition(marker.leafletElement.getLatLng());\r\n    }\r\n  };\r\n\r\n  handleViewportChanged = (viewport) => {\r\n    this.props.setMapViewport(viewport);\r\n  };\r\n\r\n  buildRouteToMarker = (location: number[]) => () => {\r\n    const { buildRoute } = this.props;\r\n\r\n    buildRoute(location);\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      classes,\r\n      wifi, toilets,\r\n      userLocation, route, mapMode,\r\n      newMarkerPosition, mapViewport,\r\n    } = this.props;\r\n\r\n    return (\r\n      <Map\r\n        className={classes.map}\r\n        viewport={mapViewport}\r\n        onViewportChanged={this.handleViewportChanged}\r\n        zoomControl={false}\r\n        ref={this.setMapRef}\r\n      >\r\n        <TileLayer\r\n          attribution={MAP_ATTRIBUTION}\r\n          url={TILE_LAYER_URL}\r\n        />\r\n        {\r\n          mapMode === MAP_MODES.CREATE && (\r\n            <FeatureGroup>\r\n              <Marker\r\n                draggable\r\n                icon={icon}\r\n                position={newMarkerPosition}\r\n                onDragend={this.updateNewMarkerPosition}\r\n                ref={this.refNewMarker}\r\n              />\r\n            </FeatureGroup>\r\n          )\r\n        }\r\n        <FeatureGroup>\r\n          {userLocation && <UserMarker key={userLocation.toString()} location={userLocation} />}\r\n        </FeatureGroup>\r\n        <FeatureGroup>\r\n          {wifi.map(marker => (\r\n            <WifiMarker key={marker.id} buildRoute={this.buildRouteToMarker} wifi={marker} />\r\n          ))}\r\n          {toilets.map(marker => (\r\n            <ToiletMarker key={marker.id} buildRoute={this.buildRouteToMarker} toilet={marker} />\r\n          ))}\r\n        </FeatureGroup>\r\n        <FeatureGroup>\r\n          <Polyline\r\n            color={ROUTE_COLOR}\r\n            positions={getPositionsForPolyline(route)}\r\n          />\r\n        </FeatureGroup>\r\n      </Map>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(FreebeeMap);\r\n","/* @flow */\r\nimport type { Styles } from '../../types/styles';\r\n\r\nexport default (): Styles => ({\r\n  map: {\r\n    width: '100%',\r\n    height: '100%',\r\n  },\r\n  '@media only screen and (min-width: 768px)': {\r\n    map: {\r\n      height: '100vh',\r\n    },\r\n  },\r\n});\r\n\r\nexport const ROUTE_COLOR = '#3f51b5';\r\n","/* @flow */\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport FreebeeMap from './map';\r\n\r\nimport { actions as markerActions, selectors, thunks } from '../../redux/markers';\r\nimport { sharedActions } from '../../redux/shared';\r\nimport { userActions } from '../../redux/user';\r\nimport {\r\n  thunks as routingThunks,\r\n  selectors as routingSelectors,\r\n} from '../../redux/routing';\r\n\r\nimport type { Wifi, Toilet } from '../../types/models';\r\n\r\ntype Props = {\r\n  wifi?: Wifi[],\r\n  toilets?: Toilet[],\r\n  mapMode: string,\r\n  route: any,\r\n  getMarkers: () => void,\r\n  getRoute: (number[], any) => void,\r\n  setCurrentLocation: (position: number[] | string) => void,\r\n  setNewMarkerPosition: (position: number[] | string) => void,\r\n  currentUserLocation: number[] | null,\r\n};\r\n\r\nclass MapContainer extends Component<Props> {\r\n  static defaultProps = {\r\n    wifi: [],\r\n    toilets: [],\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { getMarkers } = this.props;\r\n\r\n    getMarkers();\r\n    this.getUserLocation();\r\n  }\r\n\r\n  getUserLocation = () => {\r\n    const { setCurrentLocation } = this.props;\r\n    const nativeGeolocation = navigator.geolocation;\r\n    const successCallback = (position) => {\r\n      const { latitude, longitude } = position.coords;\r\n\r\n      setCurrentLocation([latitude, longitude]);\r\n    };\r\n    const errorCallback = (error) => {\r\n      console.error(error);\r\n      setCurrentLocation(error);\r\n    };\r\n\r\n    nativeGeolocation.getCurrentPosition(successCallback, errorCallback);\r\n  };\r\n\r\n  buildRoute = (marker) => {\r\n    const { getRoute, currentUserLocation } = this.props;\r\n\r\n    if (currentUserLocation !== null) {\r\n      getRoute(currentUserLocation, marker);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      wifi, toilets,\r\n      currentUserLocation, route,\r\n      mapMode,\r\n      setNewMarkerPosition, setMapViewport,\r\n      mapViewport, newMarkerPosition,\r\n    } = this.props;\r\n\r\n    return (\r\n      <FreebeeMap\r\n        wifi={wifi}\r\n        toilets={toilets}\r\n        route={route}\r\n        userLocation={currentUserLocation}\r\n        mapMode={mapMode}\r\n        buildRoute={this.buildRoute}\r\n        setNewMarkerPosition={setNewMarkerPosition}\r\n        newMarkerPosition={newMarkerPosition}\r\n        setMapViewport={setMapViewport}\r\n        mapViewport={mapViewport}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst {\r\n  selectWifi,\r\n  selectToilets,\r\n  selectFilter,\r\n} = selectors;\r\n\r\nconst mapState = (state) => {\r\n  const filter = selectFilter(state);\r\n  let wifi = [];\r\n  let toilets = [];\r\n\r\n  if (filter === null) {\r\n    wifi = selectWifi(state);\r\n    toilets = selectToilets(state);\r\n  }\r\n\r\n  if (filter === 'wifi') {\r\n    wifi = selectWifi(state);\r\n  }\r\n\r\n  if (filter === 'toilet') {\r\n    toilets = selectToilets(state);\r\n  }\r\n\r\n  return {\r\n    wifi,\r\n    toilets,\r\n    filter,\r\n    route: routingSelectors.selectRoute(state),\r\n    mapViewport: state.shared.mapViewport,\r\n    newMarkerPosition: state.markers.shared.newMarkerPosition,\r\n  };\r\n};\r\n\r\nconst { getMarkers } = thunks;\r\nconst { getRoute } = routingThunks;\r\nconst { setCurrentLocation } = userActions;\r\n\r\nconst mapDispatch = dispatch => ({\r\n  getMarkers: () => dispatch(getMarkers()),\r\n  getRoute: (point0, point1) => dispatch(getRoute(point0, point1)),\r\n  setCurrentLocation: (position: [] | string) => dispatch(setCurrentLocation(position)),\r\n  setNewMarkerPosition: position => dispatch(markerActions.setNewMarkerPosition(position)),\r\n  setMapViewport: viewport => dispatch(sharedActions.setMapViewport(viewport)),\r\n});\r\n\r\nexport default connect(mapState, mapDispatch)(MapContainer);\r\n","import FreebeeMap from './container';\r\n\r\nexport default FreebeeMap;\r\n","// @flow\r\nimport React, { PureComponent } from 'react';\r\nimport {\r\n  Divider,\r\n  Paper,\r\n  List,\r\n  ListItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  Typography,\r\n  IconButton,\r\n  withStyles,\r\n} from '@material-ui/core';\r\nimport {\r\n  DirectionsWalk as DirectionsWalkIcon,\r\n  Place as PlaceIcon,\r\n  Close as CloseIcon,\r\n} from '@material-ui/icons';\r\nimport { getTimeFromSummary, getDistanceFromSummary } from './helpers';\r\n\r\nimport styles from './styles';\r\n\r\nclass RoutePanel extends PureComponent {\r\n  render() {\r\n    const { classes, summary: { summary, marker }, resetRoute } = this.props;\r\n    const time = getTimeFromSummary(summary);\r\n    const distance = getDistanceFromSummary(summary);\r\n\r\n    return (\r\n      <Paper className={classes.root}>\r\n        <div className={classes.header}>\r\n          <Typography variant=\"subtitle1\" gutterBottom>\r\n            {`Адрес: ${marker.address}`}\r\n          </Typography>\r\n          <IconButton\r\n            onClick={resetRoute}\r\n            classes={{ root: classes.closeButtonRoot }}\r\n            className={classes.closeButton}\r\n          >\r\n            <CloseIcon />\r\n          </IconButton>\r\n        </div>\r\n        <Divider />\r\n        <List>\r\n          <ListItem disableGutters>\r\n            <ListItemIcon>\r\n              <PlaceIcon />\r\n            </ListItemIcon>\r\n            <ListItemText>\r\n              {distance}\r\n            </ListItemText>\r\n          </ListItem>\r\n          <ListItem disableGutters>\r\n            <ListItemIcon>\r\n              <DirectionsWalkIcon />\r\n            </ListItemIcon>\r\n            <ListItemText>\r\n              {time}\r\n            </ListItemText>\r\n          </ListItem>\r\n        </List>\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default withStyles(styles)(RoutePanel);\r\n","/* @flow */\r\nexport const getTimeFromSummary = (summary) => {\r\n  const { travelTime } = summary;\r\n\r\n  const minutes = travelTime / 60;\r\n  if (minutes <= 60) {\r\n    return `${Math.ceil(minutes)} минут`;\r\n  }\r\n\r\n  const hours = minutes / 60;\r\n\r\n  return `${Math.ceil(hours)} часов`;\r\n};\r\n\r\nexport const getDistanceFromSummary = (summary) => {\r\n  const { distance } = summary;\r\n\r\n  if (distance < 1000) {\r\n    return `${distance} м`;\r\n  }\r\n\r\n  return `${Math.ceil(distance / 1000)} км`;\r\n};\r\n","import Panel from './panel';\r\n\r\nexport default Panel;\r\n","export default () => ({\r\n  root: {\r\n    height: '100%',\r\n    padding: '1em 1.5em',\r\n  },\r\n  header: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n  },\r\n  closeButton: {\r\n    color: 'red',\r\n    marginBottom: '0.35em',\r\n  },\r\n  closeButtonRoot: {\r\n    padding: 0,\r\n  },\r\n});\r\n","/* @flow */\r\nimport * as React from 'react';\r\nimport { withStyles, Button, LinearProgress } from '@material-ui/core';\r\nimport { UserLocationButton, FilterButton } from '../../components';\r\nimport FeedbackSidebar from '../FeedbackSidebar';\r\nimport FreebeeMap from '../FreebeeMap';\r\nimport RoutePanel from '../RouteInformationPanel';\r\nimport styles from './styles';\r\nimport type { Classes } from '../../types/styles';\r\nimport { MAP_MODES } from '../../config/map';\r\n\r\ntype Props = {\r\n  openFeedbackSidebar: () => void,\r\n  setUserLocation: () => void,\r\n  setFilter: () => void,\r\n  resetRoute: () => void,\r\n  isMarkersFetching: boolean,\r\n  setCreationMapMode: () => void,\r\n  setReadMapMode: () => void,\r\n  mapMode: string,\r\n  routeSummary: any,\r\n  selectedFilter: string | null,\r\n  currentUserLocation: number[] | null,\r\n  classes: Classes,\r\n  route: any,\r\n};\r\n\r\nconst FreebeeMapPage = ({\r\n  openFeedbackSidebar,\r\n  setCreationMapMode,\r\n  mapMode,\r\n\r\n  setUserLocation,\r\n  currentUserLocation,\r\n\r\n  setFilter,\r\n  selectedFilter,\r\n\r\n  routeSummary,\r\n  resetRoute,\r\n\r\n  isMarkersFetching,\r\n  classes,\r\n}: Props) => {\r\n  const isReadMode = mapMode === MAP_MODES.READ;\r\n\r\n  return (\r\n    <>\r\n      {isMarkersFetching\r\n        ? <LinearProgress className={classes.progress} />\r\n        : null\r\n      }\r\n      <FreebeeMap mapMode={mapMode} currentUserLocation={currentUserLocation} />\r\n      <div className={classes.filterButton}>\r\n        <FilterButton selectedFilter={selectedFilter} setFilter={setFilter} />\r\n      </div>\r\n\r\n      <div className={classes.userLocationButton}>\r\n        <UserLocationButton onClick={setUserLocation} />\r\n      </div>\r\n\r\n      {!isMarkersFetching && <FeedbackSidebar />}\r\n\r\n      {routeSummary && (\r\n        <div className={classes.routePanel}>\r\n          <RoutePanel summary={routeSummary} resetRoute={resetRoute} />\r\n        </div>\r\n      )}\r\n\r\n      <div className={classes.contactUsWrapper}>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={isReadMode ? setCreationMapMode : openFeedbackSidebar}\r\n          className={classes.contactUs}\r\n        >\r\n          { isReadMode ? 'Нашли халяву?' : 'Подтвердить' }\r\n        </Button>\r\n      </div>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={isReadMode ? setCreationMapMode : openFeedbackSidebar}\r\n        className={classes.contactUsDesktop}\r\n      >\r\n        { isReadMode ? 'Нашли халяву?' : 'Подтвердить' }\r\n      </Button>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withStyles(styles)(FreebeeMapPage);\r\n","/* @flow */\r\nimport type { Styles } from '../../types/styles';\r\n\r\nexport default (): Styles => ({\r\n  progress: {\r\n    position: 'absolute',\r\n    width: '100%',\r\n    zIndex: 1005,\r\n  },\r\n  filterButton: {\r\n    position: 'absolute',\r\n    zIndex: 1001,\r\n  },\r\n  routePanel: {\r\n    position: 'absolute',\r\n    height: 'auto',\r\n    zIndex: 1001,\r\n  },\r\n  userLocationButton: {\r\n    position: 'absolute',\r\n    zIndex: 1002,\r\n  },\r\n  contactUsWrapper: {\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    width: '100%',\r\n    zIndex: 1000,\r\n  },\r\n  contactUs: {\r\n    width: '100%',\r\n    borderRadius: 0,\r\n    fontFamily: '\\'Roboto Condensed\\', Arial, Helvetica, sans-serif',\r\n    fontWeight: 'bold',\r\n  },\r\n  contactUsDesktop: {\r\n    display: 'none',\r\n  },\r\n  '@media only screen and (min-width: 768px)': {\r\n    contactUs: {\r\n      display: 'none',\r\n    },\r\n    userLocationButton: {\r\n      right: '2%',\r\n      bottom: '4%',\r\n    },\r\n    filterButton: {\r\n      top: '2%',\r\n      right: '2%',\r\n    },\r\n    contactUsDesktop: {\r\n      display: 'inline-flex',\r\n      position: 'absolute',\r\n      zIndex: 1001,\r\n      left: '2%',\r\n      bottom: '4%',\r\n      color: 'black',\r\n      fontFamily: \"'Roboto Condensed', Arial, Helvetica, sans-serif\",\r\n      fontWeight: 'bold',\r\n    },\r\n    routePanel: {\r\n      left: '2%',\r\n      top: '2%',\r\n      width: '15em',\r\n    },\r\n  },\r\n  '@media only screen and (max-width: 768px)': {\r\n    userLocationButton: {\r\n      right: '4%',\r\n      top: '2%',\r\n    },\r\n    filterButton: {\r\n      left: '4%',\r\n      top: '2%',\r\n    },\r\n    routePanel: {\r\n      bottom: '0',\r\n      width: '100%',\r\n    },\r\n  },\r\n});\r\n","/* @flow */\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withSnackbar } from 'notistack';\r\nimport _ from 'lodash';\r\nimport { MAP_MODES } from '../../config/map';\r\nimport FreebeeMapPage from './page';\r\n\r\nimport { open } from '../../redux/actions/ui/feedback-sidebar';\r\nimport { LOCATION_ACCESS_DENIED_CODE } from '../../redux/middlewares/const';\r\nimport { selectors as routingSelectors, routingActions } from '../../redux/routing';\r\nimport { userActions, selectors as userSelectors } from '../../redux/user';\r\nimport { sharedActions, selectors as sharedSelectors } from '../../redux/shared';\r\nimport {\r\n  actions as markerActions,\r\n  selectors as markersSelectors,\r\n  thunks as markersThunks,\r\n} from '../../redux/markers';\r\n\r\ntype Props = {\r\n  locationError: string,\r\n  setMapMode: (mode: string) => void,\r\n  getMarkerTypes: (mode: string) => void,\r\n  enqueueSnackbar: (message: string) => void,\r\n  setNewMarkerPositionOnMapViewport: () => void,\r\n  lastGlobalError: any,\r\n};\r\n\r\ntype State = {\r\n  errorSnackbarIsOpen: boolean,\r\n};\r\n\r\nclass FreebeeMapPageContainer extends Component<Props, State> {\r\n  componentDidMount() {\r\n    const { getMarkerTypes } = this.props;\r\n\r\n    getMarkerTypes();\r\n  }\r\n\r\n  componentDidUpdate(prevProps): void {\r\n    const { lastGlobalError, enqueueSnackbar } = this.props;\r\n\r\n    const oldErrorId = _.get(prevProps.lastGlobalError, 'errorId', null);\r\n    const newErrorId = _.get(lastGlobalError, 'errorId', null);\r\n\r\n    if (oldErrorId !== newErrorId && newErrorId !== null) {\r\n      const { errorMessage } = lastGlobalError;\r\n      enqueueSnackbar(errorMessage, { variant: 'error' });\r\n    }\r\n  }\r\n\r\n  setCreationMapMode = () => {\r\n    const { setMapMode, setNewMarkerPositionOnMapViewport } = this.props;\r\n\r\n    setNewMarkerPositionOnMapViewport();\r\n    setMapMode(MAP_MODES.CREATE);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <FreebeeMapPage\r\n        {...this.props}\r\n        setCreationMapMode={this.setCreationMapMode}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst mapState = state => ({\r\n  isMarkersFetching: markersSelectors.selectIsAllMarkersFetching(state),\r\n  currentUserLocation: userSelectors.selectUserCurrentLocation(state),\r\n  locationError: userSelectors.selectUserCurrentLocationError(state),\r\n  selectedFilter: markersSelectors.selectFilter(state),\r\n  routeSummary: routingSelectors.selectRouteSummary(state),\r\n  lastGlobalError: sharedSelectors.selectLastError(state),\r\n  mapViewport: state.shared.mapViewport,\r\n  mapMode: sharedSelectors.selectMapMode(state),\r\n});\r\n\r\nconst mapDispatch = dispatch => ({\r\n  openFeedbackSidebar: () => dispatch(open()),\r\n  setUserCurrentLocation: location => dispatch(userActions.setCurrentLocation(location)),\r\n  setFilter: filter => dispatch(markerActions.setFilter(filter)),\r\n  setNewMarkerPosition: position => dispatch(markerActions.setNewMarkerPosition(position)),\r\n  getMarkerTypes: () => dispatch(markersThunks.getMarkerTypes()),\r\n  resetRoute: () => dispatch(routingActions.resetRoute()),\r\n  setMapMode: mode => dispatch(sharedActions.setMapMode(mode)),\r\n});\r\n\r\nconst mergeProps = (propsFromState, propsFromDispatch) => {\r\n  const { currentUserLocation, mapViewport } = propsFromState;\r\n  const setUserLocation = () => {\r\n    if (currentUserLocation) {\r\n      propsFromDispatch.setUserCurrentLocation(currentUserLocation.slice());\r\n    } else {\r\n      propsFromDispatch.setUserCurrentLocation({\r\n        code: LOCATION_ACCESS_DENIED_CODE,\r\n      });\r\n    }\r\n  };\r\n\r\n  const setNewMarkerPositionOnMapViewport = () => {\r\n    propsFromDispatch.setNewMarkerPosition({\r\n      lat: mapViewport.center[0],\r\n      lng: mapViewport.center[1]\r\n    });\r\n  };\r\n\r\n  return {\r\n    ...propsFromState,\r\n    ...propsFromDispatch,\r\n    setUserLocation,\r\n    setNewMarkerPositionOnMapViewport,\r\n  };\r\n};\r\n\r\nexport default connect(mapState, mapDispatch, mergeProps)(withSnackbar(FreebeeMapPageContainer));\r\n","import FreebeeMapPage from './container';\r\n\r\nexport default FreebeeMapPage;\r\n","/* @flow */\r\n\r\nimport React from 'react';\r\nimport { Provider } from 'react-redux';\r\nimport { Switch, Route, BrowserRouter } from 'react-router-dom';\r\nimport { MuiThemeProvider } from '@material-ui/core';\r\nimport { SnackbarProvider } from 'notistack';\r\nimport { createStore } from './redux';\r\nimport { notification } from './config';\r\nimport theme from './styles/theme';\r\nimport FreebeeMapPage from './views/FreebeeMapPage';\r\n\r\nconst App = () => (\r\n  <Provider store={createStore()}>\r\n    <MuiThemeProvider theme={theme}>\r\n      <SnackbarProvider\r\n        maxSnack={notification.MAX_SNACK}\r\n        anchorOrigin={notification.ANCHOR}\r\n      >\r\n        <BrowserRouter basename=\"/map\">\r\n          <>\r\n            <Switch>\r\n              <Route path=\"/\" component={FreebeeMapPage} />\r\n            </Switch>\r\n          </>\r\n        </BrowserRouter>\r\n      </SnackbarProvider>\r\n    </MuiThemeProvider>\r\n  </Provider>\r\n);\r\n\r\nexport default App;\r\n","/* @flow */\r\n\r\nimport {\r\n  createStore,\r\n  applyMiddleware,\r\n} from 'redux';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport thunk from 'redux-thunk';\r\nimport { globalErrorHandler } from './middlewares';\r\n\r\nimport rootReducer from './rootReducer';\r\n\r\nexport default () => {\r\n  const middleware = applyMiddleware(\r\n    thunk,\r\n    globalErrorHandler,\r\n  );\r\n\r\n  const composeEnhancers = composeWithDevTools({});\r\n  const enhancer = composeEnhancers(\r\n    middleware,\r\n  );\r\n\r\n  return createStore(rootReducer, enhancer);\r\n};\r\n","/* @flow */\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nimport './styles/reset.css';\r\nimport './styles/global.css';\r\n\r\nconst root: ?Element = document.getElementById('root');\r\n\r\nif (root) {\r\n  // eslint-disable-next-line\r\n  ReactDOM.render(<App />, root);\r\n}\r\n"],"sourceRoot":""}