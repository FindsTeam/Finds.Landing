(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{162:function(e,t){},168:function(e,t){},169:function(e,t){},170:function(e,t,r){e.exports=r.p+"static/media/wifi.a5113c91.svg"},171:function(e,t,r){e.exports=r.p+"static/media/toilet.26830feb.svg"},172:function(e,t,r){e.exports=r.p+"static/media/socket.b9333000.svg"},173:function(e,t,r){e.exports=r.p+"static/media/water.b07a9540.svg"},174:function(e,t,r){e.exports=r.p+"static/media/user.c45c2ef8.svg"},175:function(e,t,r){e.exports=r.p+"static/media/empty-landmark.76edbd6f.svg"},5492:function(e,t,r){e.exports=r(5682)},5680:function(e,t,r){},5681:function(e,t,r){},5682:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"setError",function(){return ce}),r.d(n,"setMapMode",function(){return ie}),r.d(n,"setMapViewport",function(){return se});var a={};r.r(a),r.d(a,"selectLastError",function(){return he}),r.d(a,"selectMapMode",function(){return ge});var o={};r.r(o),r.d(o,"open",function(){return Re}),r.d(o,"close",function(){return Se});var c={};r.r(c),r.d(c,"getMarkersRequest",function(){return Ne}),r.d(c,"getMarkersSuccess",function(){return Le}),r.d(c,"getMarkersError",function(){return xe});var i={};r.r(i),r.d(i,"createFeedback",function(){return Ye});var s={};r.r(s),r.d(s,"getWifi",function(){return Ze}),r.d(s,"getToilets",function(){return et}),r.d(s,"getSockets",function(){return tt}),r.d(s,"getWater",function(){return rt}),r.d(s,"getMarkerTypes",function(){return nt});var u={};r.r(u),r.d(u,"getRoute",function(){return at});var l={};r.r(l),r.d(l,"getAddress",function(){return ot});var d={};r.r(d),r.d(d,"getToilets",function(){return ct});var f={};r.r(f),r.d(f,"getMarkersRequest",function(){return lt}),r.d(f,"getMarkersSuccess",function(){return dt}),r.d(f,"getMarkersError",function(){return ft});var p={};r.r(p),r.d(p,"getWifi",function(){return bt});var m={};r.r(m),r.d(m,"getMarkersRequest",function(){return kt}),r.d(m,"getMarkersSuccess",function(){return vt}),r.d(m,"getMarkersError",function(){return Ot});var b={};r.r(b),r.d(b,"getSockets",function(){return St});var E={};r.r(E),r.d(E,"getMarkersRequest",function(){return Ct}),r.d(E,"getMarkersSuccess",function(){return Tt}),r.d(E,"getMarkersError",function(){return Ft});var h={};r.r(h),r.d(h,"getWater",function(){return Lt});var g={};r.r(g),r.d(g,"setFilter",function(){return It}),r.d(g,"setSearch",function(){return Pt}),r.d(g,"setNewMarkerPosition",function(){return Bt}),r.d(g,"getTypesRequest",function(){return Wt}),r.d(g,"getTypesSuccess",function(){return Dt}),r.d(g,"getTypesError",function(){return qt}),r.d(g,"toiletsActions",function(){return c}),r.d(g,"wifiActions",function(){return f}),r.d(g,"socketsActions",function(){return m}),r.d(g,"waterActions",function(){return E});var k={};r.r(k),r.d(k,"selectUserCurrentLocation",function(){return Zt}),r.d(k,"selectUserCurrentLocationError",function(){return er});var v={};r.r(v),r.d(v,"selectWifi",function(){return ar}),r.d(v,"selectToilets",function(){return or}),r.d(v,"selectSockets",function(){return cr}),r.d(v,"selectWater",function(){return ir}),r.d(v,"selectIsAllMarkersFetching",function(){return sr}),r.d(v,"selectFilter",function(){return ur}),r.d(v,"selectNewMarkerPositionInGeoJSON",function(){return lr});var O={};r.r(O),r.d(O,"getMarkers",function(){return dr}),r.d(O,"getMarkerTypes",function(){return fr}),r.d(O,"wifiThunks",function(){return p}),r.d(O,"toiletsThunks",function(){return d}),r.d(O,"socketsThunks",function(){return b}),r.d(O,"waterThunks",function(){return h});var j={};r.r(j),r.d(j,"createFeedbackRequest",function(){return br}),r.d(j,"createFeedbackSuccess",function(){return Er}),r.d(j,"createFeedbackError",function(){return hr}),r.d(j,"getAddressRequest",function(){return gr}),r.d(j,"getAddressSuccess",function(){return kr}),r.d(j,"getAddressError",function(){return vr}),r.d(j,"resetAddress",function(){return Or});var R={};r.r(R),r.d(R,"createFeedback",function(){return yr}),r.d(R,"getAddressFromCoordinates",function(){return Mr});var S={};r.r(S),r.d(S,"getRouteRequest",function(){return Fr}),r.d(S,"getRouteSuccess",function(){return Ar}),r.d(S,"getRouteError",function(){return Nr}),r.d(S,"resetRoute",function(){return Lr});var w={};r.r(w),r.d(w,"selectRoute",function(){return Ir}),r.d(w,"selectRouteSummary",function(){return Pr});var y={};r.r(y),r.d(y,"getRoute",function(){return Wr});var M={};r.r(M),r.d(M,"MAX_SNACK",function(){return Vr}),r.d(M,"ANCHOR",function(){return Kr});var C,T,F,A,N,L,x,_,U,I,P,B=r(0),W=r.n(B),D=r(26),q=r.n(D),G=r(55),V=r(216),K=r(59),$=r(48),z=r(73),Q=r(32),H=r(212),J=r(213),X=r(88),Y=r.n(X),Z=r(5),ee=(C={},Object(Z.a)(C,1,"\u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044e."),Object(Z.a)(C,2,"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0438 \u043c\u0435\u0441\u0442\u043e\u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f."),Object(Z.a)(C,3,"\u0412\u0440\u0435\u043c\u044f \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u0432\u044b\u0448\u043b\u043e."),C),te=r(5686),re=r(214),ne=r.n(re),ae=Object(te.a)({SHARED:{SET_ERROR:function(e){return{errorId:ne.a.generate(),errorMessage:e}},SET_MAP_MODE:function(e){return{mode:e}},SET_MAP_VIEWPORT:function(e){return{viewport:e}}}}),oe=ae.shared,ce=oe.setError,ie=oe.setMapMode,se=oe.setMapViewport,ue=r(5687),le=r(24),de=r.n(le),fe={READ:"read",CREATE:"create"},pe={errorList:[],mapMode:fe.READ,mapViewport:{zoom:12,center:[53.9017,27.5429]}},me=Object(ue.a)((T={},Object(Z.a)(T,ce,function(e,t){var r=t.payload,n=r.errorMessage,a=r.errorId;return de()(e,{errorList:{$push:[{errorId:a,errorMessage:n}]}})}),Object(Z.a)(T,ie,function(e,t){var r=t.payload.mode;return de()(e,{mapMode:{$set:r}})}),Object(Z.a)(T,se,function(e,t){var r=t.payload.viewport;return de()(e,{mapViewport:{$set:r}})}),T),pe),be=me,Ee=r(38),he=Object(Ee.a)(function(e){return e.shared.errorList},function(e){return e.length>0?e[e.length-1]:null}),ge=function(e){return e.shared.mapMode},ke=(r(162),be),ve=function(e){return function(t){return function(r){if(r.error||Y.a.get(r,"payload.error",!1)){var a=r.payload;if(a.message&&"Network Error"===a.message&&e.dispatch(n.setError("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443.")),a.geolocationErrorCode){var o=ee[a.geolocationErrorCode];e.dispatch(n.setError(o))}}return t(r)}}},Oe=r(7),je=r(139),Re=Object(je.a)("".concat("FEEDBACK_SIDEBAR","/OPEN")),Se=Object(je.a)("".concat("FEEDBACK_SIDEBAR","/CLOSE")),we=o.open,ye=o.close,Me=Object(ue.a)((F={},Object(Z.a)(F,we.toString(),function(e){return Object(Oe.a)({},e,{open:!0})}),Object(Z.a)(F,ye.toString(),function(e){return Object(Oe.a)({},e,{open:!1})}),F),{open:!1}),Ce=Me,Te=Object(Q.combineReducers)({feedbackSidebar:Ce}),Fe=Object(te.a)({MARKERS:{TOILETS:{GET_MARKERS_REQUEST:function(){},GET_MARKERS_SUCCESS:function(e){return{toilets:e}},GET_MARKERS_ERROR:function(e){return{error:e}}}}}),Ae=Fe.markers.toilets,Ne=Ae.getMarkersRequest,Le=Ae.getMarkersSuccess,xe=Ae.getMarkersError,_e=r(50),Ue=Object(ue.a)((A={},Object(Z.a)(A,Ne,function(e){return Object(Oe.a)({},e,{isFetching:!0})}),Object(Z.a)(A,Le,function(e,t){var r=t.payload.toilets.map(function(e){var t=e.location,r=Object(_e.a)(e,["location"]),n=t.coordinates;return Object(Oe.a)({},r,{location:n})});return Object(Oe.a)({},e,{isFetching:!1,markers:r})}),Object(Z.a)(A,xe,function(e,t){var r=t.payload.error;return Object(Oe.a)({},e,{isFetching:!1,error:r})}),A),{markers:[],error:{},isFetching:!1}),Ie=Ue,Pe=r(18),Be=r.n(Pe),We=r(29),De=r(42),qe=r.n(De),Ge=function(e){return function(t){return"".concat(e).concat(t)}}("https://finds-api-production.herokuapp.com/api"),Ve=function(){return Ge("/feedback")},Ke=function(){return Ge("/wifi")},$e=function(){return Ge("/toilets")},ze=function(){return Ge("/sockets")},Qe=function(){return Ge("/water")},He=function(){return Ge("/markers/types")},Je=function(){return Ge("/route")},Xe=function(e,t){return Ge("/location/geocoding/reverse/".concat(e,"/").concat(t))},Ye=function(e){var t=e.type,r=Object(_e.a)(e,["type"]),n=Object(Oe.a)({},r,{type:[t]});return qe.a.post(Ve(),n)},Ze=function(){return qe.a.get(Ke())},et=function(){return qe.a.get($e())},tt=function(){return qe.a.get(ze())},rt=function(){return qe.a.get(Qe())},nt=function(){return qe.a.get(He())},at=function(e,t){var r={point0:e,point1:t};return qe.a.post(Je(),r)},ot=function(e,t){return qe.a.get(Xe(e,t))},ct=function(){return function(){var e=Object(We.a)(Be.a.mark(function e(t){var r,n;return Be.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(Ne()),e.prev=1,e.next=4,s.getToilets();case 4:r=e.sent,n=r.data,t(Le(n)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),t(xe());case 13:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},it=Ie,st=Object(te.a)({MARKERS:{WIFI:{GET_MARKERS_REQUEST:function(){},GET_MARKERS_SUCCESS:function(e){return{wifi:e}},GET_MARKERS_ERROR:function(e){return{error:e}}}}}),ut=st.markers.wifi,lt=ut.getMarkersRequest,dt=ut.getMarkersSuccess,ft=ut.getMarkersError,pt=Object(ue.a)((N={},Object(Z.a)(N,lt,function(e){return Object(Oe.a)({},e,{isFetching:!0})}),Object(Z.a)(N,dt,function(e,t){var r=t.payload.wifi.map(function(e){var t=e.location,r=Object(_e.a)(e,["location"]),n=t.coordinates;return Object(Oe.a)({},r,{location:n})});return Object(Oe.a)({},e,{isFetching:!1,markers:r})}),Object(Z.a)(N,ft,function(e,t){var r=t.payload.error;return Object(Oe.a)({},e,{isFetching:!1,error:r})}),N),{markers:[],error:{},isFetching:!1}),mt=pt,bt=function(){return function(){var e=Object(We.a)(Be.a.mark(function e(t){var r,n;return Be.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(lt()),e.prev=1,e.next=4,s.getWifi();case 4:r=e.sent,n=r.data,t(dt(n)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),t(ft(e.t0));case 13:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},Et=mt,ht=Object(te.a)({MARKERS:{SOCKETS:{GET_MARKERS_REQUEST:function(){},GET_MARKERS_SUCCESS:function(e){return{sockets:e}},GET_MARKERS_ERROR:function(e){return{error:e}}}}}),gt=ht.markers.sockets,kt=gt.getMarkersRequest,vt=gt.getMarkersSuccess,Ot=gt.getMarkersError,jt=Object(ue.a)((L={},Object(Z.a)(L,kt,function(e){return Object(Oe.a)({},e,{isFetching:!0})}),Object(Z.a)(L,vt,function(e,t){var r=t.payload.sockets.map(function(e){var t=e.location,r=Object(_e.a)(e,["location"]),n=t.coordinates;return Object(Oe.a)({},r,{location:n})});return Object(Oe.a)({},e,{isFetching:!1,markers:r})}),Object(Z.a)(L,Ot,function(e,t){var r=t.payload.error;return Object(Oe.a)({},e,{isFetching:!1,error:r})}),L),{markers:[],error:{},isFetching:!1}),Rt=jt,St=function(){return function(){var e=Object(We.a)(Be.a.mark(function e(t){var r,n;return Be.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(kt()),e.prev=1,e.next=4,s.getSockets();case 4:r=e.sent,n=r.data,t(vt(n)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),t(Ot(e.t0));case 13:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},wt=Rt,yt=Object(te.a)({MARKERS:{WATER:{GET_MARKERS_REQUEST:function(){},GET_MARKERS_SUCCESS:function(e){return{water:e}},GET_MARKERS_ERROR:function(e){return{error:e}}}}}),Mt=yt.markers.water,Ct=Mt.getMarkersRequest,Tt=Mt.getMarkersSuccess,Ft=Mt.getMarkersError,At=Object(ue.a)((x={},Object(Z.a)(x,Ct,function(e){return Object(Oe.a)({},e,{isFetching:!0})}),Object(Z.a)(x,Tt,function(e,t){var r=t.payload.water.map(function(e){var t=e.location,r=Object(_e.a)(e,["location"]),n=t.coordinates;return Object(Oe.a)({},r,{location:n})});return Object(Oe.a)({},e,{isFetching:!1,markers:r})}),Object(Z.a)(x,Ft,function(e,t){var r=t.payload.error;return Object(Oe.a)({},e,{isFetching:!1,error:r})}),x),{markers:[],error:{},isFetching:!1}),Nt=At,Lt=function(){return function(){var e=Object(We.a)(Be.a.mark(function e(t){var r,n;return Be.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(Ct()),e.prev=1,e.next=4,s.getWater();case 4:r=e.sent,n=r.data,t(Tt(n)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),t(Ft(e.t0));case 13:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},xt=Nt,_t=Object(te.a)({MARKERS:{SET_FILTER:function(e){return{filter:e}},SET_SEARCH:function(e){return{filter:e}},SET_NEW_MARKER_POSITION:function(e){return{location:e}},GET_TYPES_REQUEST:function(){},GET_TYPES_SUCCESS:function(e){return{types:e}},GET_TYPES_ERROR:function(e){return{error:e}}}}),Ut=_t.markers,It=Ut.setFilter,Pt=Ut.setSearch,Bt=Ut.setNewMarkerPosition,Wt=Ut.getTypesRequest,Dt=Ut.getTypesSuccess,qt=Ut.getTypesError,Gt=It,Vt=Pt,Kt=Bt,$t=Wt,zt=Dt,Qt=qt,Ht={selected:null,newMarkerPosition:null,markerTypes:[],isMarkerTypesFetching:!1,markerTypesError:null,searchString:""},Jt=Object(ue.a)((_={},Object(Z.a)(_,Gt,function(e,t){var r=t.payload.filter;return Object(Oe.a)({},e,{selected:r})}),Object(Z.a)(_,Vt,function(e,t){var r=t.payload.filter;return Object(Oe.a)({},e,{searchString:r})}),Object(Z.a)(_,Kt,function(e,t){var r=t.payload.location;return Object(Oe.a)({},e,{newMarkerPosition:r})}),Object(Z.a)(_,$t,function(e){return Object(Oe.a)({},e,{isMarkerTypesFetching:!0,markerTypesError:Ht.markerTypesError})}),Object(Z.a)(_,zt,function(e,t){var r=t.payload.types;return Object(Oe.a)({},e,{isMarkerTypesFetching:!1,markerTypes:r})}),Object(Z.a)(_,Qt,function(e,t){var r=t.payload.error;return Object(Oe.a)({},e,{isMarkerTypesFetching:!1,markerTypesError:r})}),_),Ht),Xt=Object(Q.combineReducers)({shared:Jt,toilets:it,wifi:Et,sockets:wt,water:xt}),Yt=Object(te.a)({USER:{SET_CURRENT_LOCATION:function(e){return e.length?{currentLocation:e}:{error:!0,geolocationErrorCode:e.code,currentLocation:null}}}}).user,Zt=function(e){return e.user.currentLocation},er=function(e){return e.user.locationError},tr=(r(168),Yt.setCurrentLocation),rr=Object(ue.a)(Object(Z.a)({},tr.toString(),function(e,t){var r=t.payload.currentLocation;return de()(e,{currentLocation:{$set:r}})}),{currentLocation:null,locationError:null}),nr=function(e){return e.markers},ar=Object(Ee.a)(nr,function(e){return e.wifi.markers}),or=Object(Ee.a)(nr,function(e){return e.toilets.markers}),cr=Object(Ee.a)(nr,function(e){return e.sockets.markers}),ir=Object(Ee.a)(nr,function(e){return e.water.markers}),sr=Object(Ee.a)(nr,function(e){return e.wifi.isFetching||e.toilets.isFetching||e.sockets.isFetching||e.water.isFetching}),ur=Object(Ee.a)(nr,function(e){return e.shared.selected}),lr=Object(Ee.a)([function(e){return e.markers.shared.newMarkerPosition},k.selectUserCurrentLocation],function(e,t){return e||t}),dr=function(){return function(){var e=Object(We.a)(Be.a.mark(function e(t){return Be.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t(p.getWifi()),t(d.getToilets()),t(b.getSockets()),t(h.getWater())]);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},fr=function(){return function(){var e=Object(We.a)(Be.a.mark(function e(t){var r,n;return Be.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(Wt()),e.prev=1,e.next=4,s.getMarkerTypes();case 4:r=e.sent,n=r.data,t(Dt(n)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),t(qt(e.t0));case 13:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},pr=Xt,mr=Object(te.a)({FEEDBACK:{CREATE_FEEDBACK_REQUEST:function(){},CREATE_FEEDBACK_SUCCESS:function(){},CREATE_FEEDBACK_ERROR:function(e){return{error:e}},GET_ADDRESS_REQUEST:function(){},GET_ADDRESS_SUCCESS:function(e){return{address:e}},GET_ADDRESS_ERROR:function(e){return{error:e}},RESET_ADDRESS:function(){}}}).feedback,br=mr.createFeedbackRequest,Er=mr.createFeedbackSuccess,hr=mr.createFeedbackError,gr=mr.getAddressRequest,kr=mr.getAddressSuccess,vr=mr.getAddressError,Or=mr.resetAddress,jr=Object(ue.a)((U={},Object(Z.a)(U,br,function(e){return de()(e,{isLoading:{$set:!0}})}),Object(Z.a)(U,Er,function(e){return de()(e,{isLoading:{$set:!1}})}),Object(Z.a)(U,hr,function(e,t){var r=t.payload.error;return de()(e,{isLoading:{$set:!1},error:{$set:r}})}),U),{feedback:null,error:{},isLoading:!1}),Rr={suggestedAddress:null,feedbackAddressError:null,isFeedbackAddressLoading:!1},Sr=Object(ue.a)((I={},Object(Z.a)(I,gr,function(e){return de()(e,{isFeedbackAddressLoading:{$set:!0},feedbackAddressError:{$set:Rr.feedbackAddressError}})}),Object(Z.a)(I,kr,function(e,t){var r=t.payload.address;return de()(e,{suggestedAddress:{$set:r},isFeedbackAddressLoading:{$set:!1}})}),Object(Z.a)(I,vr,function(e,t){var r=t.payload.error;return de()(e,{isFeedbackAddressLoading:{$set:!1},feedbackAddressError:{$set:r}})}),Object(Z.a)(I,Or,function(e){return de()(e,{isFeedbackAddressLoading:{$set:Rr.isFeedbackAddressLoading},feedbackAddressError:{$set:Rr.feedbackAddressError},suggestedAddress:{$set:Rr.suggestedAddress}})}),I),Rr),wr=Object(Q.combineReducers)({feedback:jr,feedbackAddress:Sr}),yr=(r(169),function(e){return function(){var t=Object(We.a)(Be.a.mark(function t(r){return Be.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r(br()),t.prev=1,t.next=4,i.createFeedback(e);case 4:r(Er()),t.next=12;break;case 7:throw t.prev=7,t.t0=t.catch(1),console.error(t.t0),r(hr(t.t0)),t.t0;case 12:case"end":return t.stop()}},t,this,[[1,7]])}));return function(e){return t.apply(this,arguments)}}()}),Mr=function(e){return function(){var t=Object(We.a)(Be.a.mark(function t(r){var n,a;return Be.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r(gr()),t.prev=1,t.next=4,l.getAddress(e[0],e[1]);case 4:n=t.sent,a=n.data,r(kr(a)),t.next=14;break;case 9:throw t.prev=9,t.t0=t.catch(1),console.error(t.t0),r(vr(t.t0)),t.t0;case 14:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()},Cr=wr,Tr=Object(te.a)({ROUTING:{GET_ROUTE_REQUEST:function(e){return{marker:e}},GET_ROUTE_SUCCESS:function(e){return{route:e}},GET_ROUTE_ERROR:function(e){return{error:e}},RESET_ROUTE:function(){}}}).routing,Fr=Tr.getRouteRequest,Ar=Tr.getRouteSuccess,Nr=Tr.getRouteError,Lr=Tr.resetRoute,xr={marker:null,route:null,isFetching:!1,error:null},_r=Object(ue.a)((P={},Object(Z.a)(P,Fr,function(e,t){var r=t.payload.marker;return de()(e,{marker:{$set:r},isFetching:{$set:!0},error:{$set:xr.error}})}),Object(Z.a)(P,Ar,function(e,t){var r=t.payload.route;return de()(e,{isFetching:{$set:!1},route:{$set:r}})}),Object(Z.a)(P,Nr,function(e,t){var r=t.payload.error;return de()(e,{isFetching:{$set:!1},error:{$set:r}})}),Object(Z.a)(P,Lr,function(e){return de()(e,{route:{$set:null}})}),Object(Z.a)(P,g.setFilter,function(e,t){return t.payload.filter?de()(e,{error:{$set:null},route:{$set:null}}):e}),P),xr),Ur=function(e){return e.routing.route},Ir=Object(Ee.a)(Ur,function(e){return e?e.leg:null}),Pr=Object(Ee.a)([Ur,function(e){return e.routing.marker}],function(e,t){return e?{summary:e.summary,marker:t}:null}),Br=function(e){var t=e.response.route[0],r=t.leg,n=t.summary;return{leg:r[0],summary:n}},Wr=function(e,t){return function(){var r=Object(We.a)(Be.a.mark(function r(n){var a,o,c;return Be.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=t.location,n(Fr(t)),r.prev=2,r.next=5,u.getRoute(e,a);case 5:o=r.sent,c=Br(o.data),n(Ar(c)),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(2),n(Nr(r.t0));case 13:case"end":return r.stop()}},r,this,[[2,10]])}));return function(e){return r.apply(this,arguments)}}()},Dr={user:rr,ui:Te,markers:pr,feedback:Cr,routing:_r,shared:ke},qr=Object(Q.combineReducers)(Dr),Gr=function(){var e=Object(Q.applyMiddleware)(J.a,ve),t=Object(H.composeWithDevTools)({})(e);return Object(Q.createStore)(qr,t)},Vr=3,Kr={vertical:"bottom",horizontal:"right"},$r=Object($.createMuiTheme)({palette:{primary:{main:"#f4c844"},secondary:{main:"#e53935"}},typography:{useNextVariants:!0}}),zr=r(33),Qr=r(34),Hr=r(36),Jr=r(35),Xr=r(37),Yr=r(3),Zr=r(5683),en=r(5689),tn=r(20),rn=r(12),nn=r.n(rn),an=r(170),on=r.n(an),cn=r(171),sn=r.n(cn),un=r(172),ln=r.n(un),dn=r(173),fn=r.n(dn),pn=r(174),mn=r.n(pn),bn=r(175),En=r.n(bn),hn=[25,37],gn={iconUrl:sn.a,iconSize:hn},kn=new nn.a.Icon(gn),vn=Object($.withStyles)(function(){return{routeButton:{paddingTop:0,paddingBottom:0,"&:hover":{backgroundColor:"transparent"}},content:{width:250,fontSize:13},point:{fontWeight:"bold"},title:{fontWeight:"bold"}}})(function(e){var t=e.toilet,r=e.classes,n=e.buildRoute;return B.createElement(Zr.a,{icon:kn,position:t.location,onDblclick:function(){n(t)()}},B.createElement(en.a,{autoPan:!1},B.createElement("div",{className:r.content},B.createElement("span",{className:r.title},"\u0422\u0443\u0430\u043b\u0435\u0442"),B.createElement(Yr.f,{disableRipple:!0,className:r.routeButton,onClick:n(t)},B.createElement(tn.c,null)),B.createElement("br",null),B.createElement("br",null),B.createElement("span",{className:r.point},"\u0410\u0434\u0440\u0435\u0441: "),B.createElement("span",null,t.address),B.createElement("br",null),B.createElement("br",null),B.createElement("span",{className:r.point},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: "),B.createElement("span",null,t.description||"\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"))))}),On={iconUrl:on.a,iconSize:hn},jn=new nn.a.Icon(On),Rn=Object($.withStyles)(function(){return{routeButton:{paddingTop:0,paddingBottom:0,"&:hover":{backgroundColor:"transparent"}},content:{width:250,fontSize:13},point:{fontWeight:"bold"},title:{fontWeight:"bold"}}})(function(e){var t=e.wifi,r=e.classes,n=e.buildRoute;return B.createElement(Zr.a,{icon:jn,position:t.location,onDblclick:function(){n(t)()}},B.createElement(en.a,{autoPan:!1},B.createElement("div",{className:r.content},B.createElement("span",{className:r.point},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: "),B.createElement("span",{className:r.title},t.title),B.createElement(Yr.f,{disableRipple:!0,className:r.routeButton,onClick:n(t)},B.createElement(tn.c,null)),B.createElement("br",null),B.createElement("br",null),B.createElement("span",{className:r.point},"\u0410\u0434\u0440\u0435\u0441: "),B.createElement("span",null,t.address),B.createElement("br",null),B.createElement("br",null),B.createElement("span",{className:r.point},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: "),B.createElement("span",null,t.description))))}),Sn={iconUrl:ln.a,iconSize:hn},wn=new nn.a.Icon(Sn),yn=Object($.withStyles)(function(){return{routeButton:{paddingTop:0,paddingBottom:0,"&:hover":{backgroundColor:"transparent"}},content:{width:250,fontSize:13},point:{fontWeight:"bold"},title:{fontWeight:"bold"}}})(function(e){var t=e.socket,r=e.classes,n=e.buildRoute;return B.createElement(Zr.a,{icon:wn,position:t.location,onDblclick:function(){n(t)()}},B.createElement(en.a,{autoPan:!1},B.createElement("div",{className:r.content},B.createElement("span",{className:r.title},"\u0420\u043e\u0437\u0435\u0442\u043a\u0430"),B.createElement(Yr.f,{disableRipple:!0,className:r.routeButton,onClick:n(t)},B.createElement(tn.c,null)),B.createElement("br",null),B.createElement("br",null),B.createElement("span",{className:r.point},"\u0410\u0434\u0440\u0435\u0441: "),B.createElement("span",null,t.address),B.createElement("br",null),B.createElement("br",null),B.createElement("span",{className:r.point},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: "),B.createElement("span",null,t.description||"\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"))))}),Mn={iconUrl:fn.a,iconSize:hn},Cn=new nn.a.Icon(Mn),Tn=Object($.withStyles)(function(){return{routeButton:{paddingTop:0,paddingBottom:0,"&:hover":{backgroundColor:"transparent"}},content:{width:250,fontSize:13},point:{fontWeight:"bold"},title:{fontWeight:"bold"}}})(function(e){var t=e.water,r=e.classes,n=e.buildRoute;return B.createElement(Zr.a,{icon:Cn,position:t.location,onDblclick:function(){n(t)()}},B.createElement(en.a,{autoPan:!1},B.createElement("div",{className:r.content},B.createElement("span",{className:r.title},"\u0412\u043e\u0434\u0430"),B.createElement(Yr.f,{disableRipple:!0,className:r.routeButton,onClick:n(t)},B.createElement(tn.c,null)),B.createElement("br",null),B.createElement("br",null),B.createElement("span",{className:r.point},"\u0410\u0434\u0440\u0435\u0441: "),B.createElement("span",null,t.address),B.createElement("br",null),B.createElement("br",null),B.createElement("span",{className:r.point},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: "),B.createElement("span",null,t.description||"\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"))))}),Fn={iconUrl:mn.a,iconSize:[25,25]},An=new nn.a.Icon(Fn),Nn=function(e){var t=e.location;return B.createElement(Zr.a,{icon:An,zIndexOffset:1e4,position:t})},Ln=function(e){var t=e.onClick;return W.a.createElement(Yr.c,{color:"primary",onClick:t},W.a.createElement(tn.f,{color:"inherit"}))},xn=r(76),_n=function(e){return{filter:{},drop:{display:"flex",flexDirection:"column",alignItems:"center"},button:{},open:{display:"flex"},close:{display:"none"},mainButton:{},optionButton:{marginTop:15},"@media only screen and (min-width: 768px)":{filter:{top:"2%",left:"2%"}}}},Un=Object($.withStyles)(_n)(function(e){var t=e.Icon,r=e.filter,n=e.onClick,a=e.classes,o=e.isSelected;return B.createElement(Yr.c,{className:Object(xn.a)([a.button,a.optionButton]),color:o?"primary":"default",onClick:n(r),size:"small"},B.createElement(t,null))}),In={label:"all",value:null},Pn={label:"wifi",value:1},Bn={label:"toilet",value:2},Wn={label:"socket",value:3},Dn={label:"water",value:4},qn=function(){return B.createElement(tn.k,{color:"inherit"})},Gn=function(){return B.createElement(tn.h,{color:"inherit"})},Vn=function(){return B.createElement(tn.j,{color:"inherit"})},Kn=function(){return B.createElement(tn.l,{color:"inherit"})},$n=function(){return B.createElement(tn.a,{color:"inherit"})},zn=function(e){function t(){var e,r;Object(zr.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(Hr.a)(this,(e=Object(Jr.a)(t)).call.apply(e,[this].concat(a)))).state={open:!1},r.onFilterClick=function(e){return function(){(0,r.props.setFilter)(e)}},r.toggle=function(){r.setState(function(e){return{open:!e.open}})},r}return Object(Xr.a)(t,e),Object(Qr.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,r=e.selectedFilter,n=this.state.open;return W.a.createElement("div",{className:Object(xn.a)([t.filter])},W.a.createElement(Yr.c,{className:Object(xn.a)([t.button,t.mainButton]),color:"primary",onClick:this.toggle},W.a.createElement(tn.e,{color:"inherit"})),W.a.createElement("div",{className:Object(xn.a)([n?t.open:t.close,t.drop])},W.a.createElement(Un,{isSelected:null===r,filter:In.value,onClick:this.onFilterClick,Icon:$n}),W.a.createElement(Un,{isSelected:r===Bn.value,filter:Bn.value,onClick:this.onFilterClick,Icon:qn}),W.a.createElement(Un,{isSelected:r===Pn.value,filter:Pn.value,onClick:this.onFilterClick,Icon:Kn}),W.a.createElement(Un,{isSelected:r===Wn.value,filter:Wn.value,onClick:this.onFilterClick,Icon:Gn}),W.a.createElement(Un,{isSelected:r===Dn.value,filter:Dn.value,onClick:this.onFilterClick,Icon:Vn})))}}]),t}(B.Component),Qn=Object($.withStyles)(_n)(zn),Hn=r(60),Jn=r(100),Xn=r.n(Jn),Yn=r(58),Zn=r.n(Yn),ea=r(99),ta=r.n(ea),ra=function(e){return{wrapper:{backgroundColor:"#ffffffdd",borderRadius:"4px"}}},na=function(e){function t(e){var r;return Object(zr.a)(this,t),(r=Object(Hr.a)(this,Object(Jr.a)(t).call(this,e))).state={isInputShown:!1,searchValue:""},r.onClick=function(){r.setState({isInputShown:!0})},r.handleClickOutside=function(e){r.state.searchValue||!r.wrapperRef||r.wrapperRef.contains(e.target)||r.setState({isInputShown:!1})},r.renderSearchButton=function(){var e=r.state.isInputShown;return W.a.createElement(Xn.a,{in:!e,unmountOnExit:!0},W.a.createElement(Yr.c,{color:"primary",onClick:r.onClick},W.a.createElement(tn.i,{color:"inherit"})))},r.onChange=function(e){var t=e.target.value,n=r.props.onChange;r.setState({searchValue:t}),n(t)},r.renderInput=function(){var e=r.props.classes,t=r.state.isInputShown;return W.a.createElement(Zn.a,{direction:"down",in:t,unmountOnExit:!0},W.a.createElement("div",{ref:r.setWrapperRef,className:e.wrapper},W.a.createElement(ta.a,{id:"outlined-search",placeholder:"\u041f\u043e\u0438\u0441\u043a \u0442\u043e\u0447\u043a\u0438...",type:"search",onChange:r.onChange,variant:"outlined"})))},r.setWrapperRef=r.setWrapperRef.bind(Object(Hn.a)(Object(Hn.a)(r))),r.handleClickOutside=r.handleClickOutside.bind(Object(Hn.a)(Object(Hn.a)(r))),r}return Object(Xr.a)(t,e),Object(Qr.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"render",value:function(){return this.state.isInputShown?this.renderInput():this.renderSearchButton()}}]),t}(B.Component),aa=Object($.withStyles)(ra)(na),oa=function(e){var t=[];return e.author&&e.author.trim()||t.push("author"),e.address&&e.address.trim()||t.push("address"),{errors:t,hasErrors:0!==t.length}},ca=function(e){var t="";return t+=e.street?"".concat(e.street,", "):"",t+=e.house?"".concat(e.house,", "):"",t+=e.city?"".concat(e.city):""},ia=Object($.createMuiTheme)({palette:{primary:{main:"#4caf50",contrastText:"#fff"},secondary:{main:"#d14942"}}}),sa=Object($.withStyles)(function(e){return Object(Z.a)({sidebarRoot:{width:"100%",overflowX:"hidden"},sidebarTitle:{padding:16,paddingBottom:0},sidebarTitleContent:{fontFamily:"'Roboto Condensed', Arial, Helvetica, sans-serif",fontWeight:"bold"},fieldsContainer:{margin:0},formField:{margin:12,width:"93%"},buttonsContainer:{display:"flex",justifyContent:"space-around"}},e.breakpoints.up("sm"),{sidebarRoot:{width:340}})})(function(e){var t=e.feedback,r=e.freebieTypes,n=e.isFeedbackAddressLoading,a=e.errors,o=e.open,c=e.isOpen,i=e.cancel,s=e.submit,u=e.handleFieldChange,l=e.classes,d=function(e){return function(t){return e.includes(t)}}(a);return B.createElement($.MuiThemeProvider,{theme:ia},B.createElement(Yr.p,{open:c,onClose:i,onOpen:o,anchor:"left",classes:{paper:l.sidebarRoot}},B.createElement(Yr.e,{container:!0},B.createElement(Yr.e,{item:!0,xs:12},n?B.createElement(Yr.h,{color:"primary"}):null,B.createElement("div",{className:l.sidebarTitle},B.createElement(Yr.r,{className:l.sidebarTitleContent,variant:"headline",gutterBottom:!0,align:"center"},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u0435\u0441\u044c \u0445\u0430\u043b\u044f\u0432\u043e\u0439 \u0441 \u0434\u0440\u0443\u0433\u0438\u043c\u0438!"))),B.createElement(Yr.e,{className:l.fieldsContainer,container:!0,spacing:24},B.createElement(Yr.e,{item:!0,xs:12},B.createElement(Yr.d,{error:d("address"),required:!0,fullWidth:!0,className:l.formField},B.createElement(Yr.q,{error:d("address"),required:!0,onChange:u("address"),value:t.address||"",InputLabelProps:{shrink:!0},placeholder:"\u0443\u043b. \u0425\u0430\u043b\u044f\u0432\u0438\u043d\u0430, 7",label:"\u041c\u0435\u0441\u0442\u043e \u0445\u0430\u043b\u044f\u0432\u044b",fullWidth:!0}))),B.createElement(Yr.e,{item:!0,xs:12},B.createElement(Yr.d,{error:d("type"),required:!0,fullWidth:!0,className:l.formField},B.createElement(Yr.g,{required:!0,error:d("type"),htmlFor:"freebieType"},"\u0412\u0438\u0434 \u0445\u0430\u043b\u044f\u0432\u044b"),B.createElement(Yr.o,{error:d("type"),onChange:u("type"),value:t.type,inputProps:{id:"freebieType",name:"freebieType"},fullWidth:!0},r.map(function(e){return B.createElement(Yr.m,{key:e.value,value:e.value},e.label)})))),B.createElement(Yr.e,{item:!0,xs:12},B.createElement(Yr.d,{error:d("author"),required:!0,fullWidth:!0,className:l.formField},B.createElement(Yr.q,{error:d("author"),required:!0,onChange:u("author"),value:t.author,placeholder:"\u0410\u0432\u0442\u043e\u0440",label:"Freebee",InputLabelProps:{shrink:!0},fullWidth:!0}))),B.createElement(Yr.e,{item:!0,xs:12},B.createElement(Yr.d,{fullWidth:!0,className:l.formField},B.createElement(Yr.q,{onChange:u("description"),value:t.description,multiline:!0,placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u043e\u0439 \u0445\u0430\u043b\u044f\u0432\u044b",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",InputLabelProps:{shrink:!0},fullWidth:!0}))),B.createElement(Yr.e,{item:!0,xs:12},B.createElement(Yr.e,{container:!0,className:l.buttonsContainer},B.createElement(Yr.a,{onClick:i,variant:"contained",color:"secondary"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),B.createElement(Yr.a,{variant:"contained",type:"submit",color:"primary",onClick:s},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))))))}),ua={address:null,type:[""],author:"",description:"",errors:[]},la=function(e){function t(){var e,r;Object(zr.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(Hr.a)(this,(e=Object(Jr.a)(t)).call.apply(e,[this].concat(a)))).state=ua,r.handleFieldChange=function(e){return function(t){r.setState(Object(Z.a)({},e,t.target.value))}},r.handleSubmit=function(){var e=r.props,t=e.closeSidebar,n=e.sendFeedback,a=e.setReadMapMode,o=e.location,c=r.state,i=c.type,s=c.address,u=c.author,l=c.description,d={location:o,address:s,type:i.toString(),author:u,description:l},f=oa(d);f.hasErrors?r.setState({errors:f.errors}):(n(d).then(function(){r.props.enqueueSnackbar("\u0425\u0430\u043b\u044f\u0432\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430!",{variant:"success"})}).catch(function(){r.props.enqueueSnackbar("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0445\u0430\u043b\u044f\u0432\u044b!",{variant:"error"})}),a(),t(),r.setState(Object(Oe.a)({},ua)))},r.handleCancel=function(){var e=r.props,t=e.closeSidebar,n=e.setReadMapMode,a=e.resetSuggestedAddress;n(),a(),r.setState(Object(Oe.a)({},ua)),t()},r}return Object(Xr.a)(t,e),Object(Qr.a)(t,[{key:"componentDidUpdate",value:function(){var e=this.state,t=e.type,r=e.address,n=this.props,a=n.freebieTypes,o=n.suggestedAddress;t===ua.type&&0!==a.length&&this.setState({type:a[0].value}),null===r&&null!==o&&this.setState({address:ca(o.address)})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,r=e.openSidebar,n=e.freebieTypes,a=e.isFeedbackAddressLoading,o=this.state,c=o.address,i=o.author,s=o.type,u=o.description,l=o.errors;if(0===n.length)return null;var d={address:c,author:i,type:s,description:u};return W.a.createElement(sa,{feedback:d,isFeedbackAddressLoading:a,errors:l,freebieTypes:n,isOpen:t,open:r,submit:this.handleSubmit,cancel:this.handleCancel,handleFieldChange:this.handleFieldChange})}}]),t}(B.Component),da=R.createFeedback,fa={closeSidebar:Se,openSidebar:Re,sendFeedback:da,resetSuggestedAddress:function(){return j.resetAddress()},setReadMapMode:function(){return n.setMapMode(fe.READ)}},pa=Object(G.b)(function(e){return Object(Oe.a)({isOpen:e.ui.feedbackSidebar.open,location:v.selectNewMarkerPositionInGeoJSON(e),freebieTypes:e.markers.shared.markerTypes},e.feedback.feedbackAddress)},fa)(Object(z.withSnackbar)(la)),ma=r(61),ba=r(5688),Ea=r(5690),ha=r(5684),ga=r(5685),ka=function(e){return[e.latitude,e.longitude]},va=function(e){if(!e)return[];var t=e.maneuver.map(function(e){var t=e.position;return ka(t)}),r=ka(e.start.originalPosition),n=ka(e.end.originalPosition);return[r].concat(Object(ma.a)(t),[n])},Oa=(r(5672),{iconUrl:En.a,iconSize:hn,className:"NewMarkerIcon"}),ja=new nn.a.Icon(Oa),Ra=function(e){function t(){var e,r;Object(zr.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(Hr.a)(this,(e=Object(Jr.a)(t)).call.apply(e,[this].concat(a)))).refNewMarker=Object(B.createRef)(),r.setMapRef=function(e){r.map=e},r.handleViewportChanged=function(e){var t=r.props,n=t.setMapViewport,a=t.setNewMarkerPosition,o=t.mapMode;if(n(e),o===fe.CREATE){var c=r.refNewMarker.current;c&&(a(e.center),c.leafletElement.setLatLng(e.center))}},r.buildRouteToMarker=function(e){return function(){(0,r.props.buildRoute)(e)}},r}return Object(Xr.a)(t,e),Object(Qr.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.userLocation,n=t.wifi,a=t.toilets,o=t.sockets,c=t.water,i=this.map.leafletElement;if(null!==r&&e.userLocation!==r&&i.panTo(r),e.wifi.length>n.length||e.toilets.length>a.length||e.sockets.length>o.length||e.water.length>c.length){var s=[].concat(Object(ma.a)(n),Object(ma.a)(a),Object(ma.a)(o),Object(ma.a)(c));1===s.length&&i.panTo(s[0].location)}}},{key:"render",value:function(){var e=this,t=this.props,r=t.classes,n=t.wifi,a=t.toilets,o=t.sockets,c=t.water,i=t.userLocation,s=t.route,u=t.mapMode,l=t.mapViewport;return W.a.createElement(ba.a,{className:r.map,viewport:l,onViewportChanged:this.handleViewportChanged,zoomControl:!1,ref:this.setMapRef,maxZoom:19},W.a.createElement(Ea.a,{attribution:"&amp;copy <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),u===fe.CREATE&&W.a.createElement(ha.a,null,W.a.createElement(Zr.a,{zIndexOffset:1100,icon:ja,position:l.center,ref:this.refNewMarker})),W.a.createElement(ha.a,null,i&&W.a.createElement(Nn,{key:i.toString(),location:i})),W.a.createElement(ha.a,null,n.map(function(t){return W.a.createElement(Rn,{key:t.id,buildRoute:e.buildRouteToMarker,wifi:t})}),a.map(function(t){return W.a.createElement(vn,{key:t.id,buildRoute:e.buildRouteToMarker,toilet:t})}),o.map(function(t){return W.a.createElement(yn,{key:t.id,buildRoute:e.buildRouteToMarker,socket:t})}),c.map(function(t){return W.a.createElement(Tn,{key:t.id,buildRoute:e.buildRouteToMarker,water:t})})),W.a.createElement(ha.a,null,W.a.createElement(ga.a,{color:"#3f51b5",positions:va(s)})))}}]),t}(B.Component);Ra.defaultProps={wifi:[],toilets:[],sockets:[],water:[]};var Sa=Object($.withStyles)(function(){return{map:{height:"100vh",width:"100vw"}}})(Ra),wa=function(e){function t(){var e,r;Object(zr.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(Hr.a)(this,(e=Object(Jr.a)(t)).call.apply(e,[this].concat(a)))).getUserLocation=function(){var e=r.props.setCurrentLocation;navigator.geolocation.getCurrentPosition(function(t){var r=t.coords,n=r.latitude,a=r.longitude;e([n,a])},function(t){console.error(t),e(t)})},r.buildRoute=function(e){var t=r.props,n=t.getRoute,a=t.currentUserLocation;null!==a&&n(a,e)},r}return Object(Xr.a)(t,e),Object(Qr.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.getMarkers)(),this.getUserLocation()}},{key:"render",value:function(){var e=this.props,t=e.wifi,r=e.toilets,n=e.sockets,a=e.water,o=e.currentUserLocation,c=e.route,i=e.mapMode,s=e.setNewMarkerPosition,u=e.mapViewport,l=e.setMapViewport;return W.a.createElement(Sa,{wifi:t,toilets:r,sockets:n,water:a,route:c,userLocation:o,mapMode:i,buildRoute:this.buildRoute,setNewMarkerPosition:s,setMapViewport:l,mapViewport:u})}}]),t}(B.Component);wa.defaultProps={wifi:[],toilets:[],sockets:[],water:[]};var ya=function(e,t){var r=t.toLowerCase().trim(),n=e.description&&e.description.toLowerCase().includes(r),a=e.title&&e.title.toLowerCase().includes(r),o=e.address&&e.address.toLowerCase().includes(r);return n||a||o},Ma=O.getMarkers,Ca=y.getRoute,Ta=Yt.setCurrentLocation,Fa=Object(G.b)(function(e){var t=v.selectFilter(e),r=e.markers.shared.searchString,n=[],a=[],o=[],c=[];return t===In.value&&(n=v.selectWifi(e),a=v.selectToilets(e),o=v.selectSockets(e),c=v.selectWater(e)),t===Pn.value&&(n=v.selectWifi(e)),t===Bn.value&&(a=v.selectToilets(e)),t===Wn.value&&(o=v.selectSockets(e)),t===Dn.value&&(c=v.selectWater(e)),r&&(n=n.filter(function(e){return ya(e,r)}),a=a.filter(function(e){return ya(e,r)}),o=o.filter(function(e){return ya(e,r)}),c=c.filter(function(e){return ya(e,r)})),{wifi:n,toilets:a,sockets:o,water:c,filter:t,route:w.selectRoute(e),mapViewport:e.shared.mapViewport,newMarkerPosition:e.markers.shared.newMarkerPosition}},function(e){return{getMarkers:function(){return e(Ma())},getRoute:function(t,r){return e(Ca(t,r))},setCurrentLocation:function(t){return e(Ta(t))},setNewMarkerPosition:function(t){return e(g.setNewMarkerPosition(t))},setMapViewport:function(t){return e(n.setMapViewport(t))}}})(wa),Aa=function(e){function t(){return Object(zr.a)(this,t),Object(Hr.a)(this,Object(Jr.a)(t).apply(this,arguments))}return Object(Xr.a)(t,e),Object(Qr.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,r=e.summary,n=r.summary,a=r.marker,o=e.resetRoute,c=function(e){var t=e.travelTime/60;if(t<=60)return"".concat(Math.ceil(t)," \u043c\u0438\u043d\u0443\u0442");var r=t/60;return"".concat(Math.ceil(r)," \u0447\u0430\u0441\u043e\u0432")}(n),i=function(e){var t=e.distance;return t<1e3?"".concat(t," \u043c"):"".concat(Math.ceil(t/1e3)," \u043a\u043c")}(n);return W.a.createElement(Yr.n,{className:t.root},W.a.createElement("div",{className:t.header},W.a.createElement(Yr.r,{variant:"subtitle1",gutterBottom:!0},"\u0410\u0434\u0440\u0435\u0441: ".concat(a.address)),W.a.createElement(Yr.f,{onClick:o,classes:{root:t.closeButtonRoot},className:t.closeButton},W.a.createElement(tn.b,null))),W.a.createElement(Yr.b,null),W.a.createElement(Yr.i,null,W.a.createElement(Yr.j,{disableGutters:!0},W.a.createElement(Yr.k,null,W.a.createElement(tn.g,null)),W.a.createElement(Yr.l,null,i)),W.a.createElement(Yr.j,{disableGutters:!0},W.a.createElement(Yr.k,null,W.a.createElement(tn.d,null)),W.a.createElement(Yr.l,null,c))))}}]),t}(B.PureComponent),Na=Object($.withStyles)(function(){return{root:{height:"100%",padding:"1em 1.5em"},header:{display:"flex",justifyContent:"space-between",alignItems:"center"},closeButton:{color:"red",marginBottom:"0.35em"},closeButtonRoot:{padding:0,height:25}}})(Aa),La=Object($.withStyles)(function(){return{progress:{position:"absolute",width:"100%",zIndex:1005},filterButton:{position:"absolute",zIndex:1001},routePanel:{position:"absolute",height:"auto",zIndex:1001},userLocationButton:{position:"absolute",zIndex:1002},searchButton:{position:"absolute",zIndex:1003},contactUsWrapper:{position:"absolute",bottom:0,width:"100%",zIndex:1e3},contactUs:{width:"100%",borderRadius:0,fontFamily:"'Roboto Condensed', Arial, Helvetica, sans-serif",fontWeight:"bold"},contactUsDesktop:{display:"none"},"@media only screen and (min-width: 768px)":{contactUs:{display:"none"},userLocationButton:{right:"2%",bottom:"4%"},filterButton:{top:"2%",right:"2%"},searchButton:{top:"2%",left:"2%"},contactUsDesktop:{display:"inline-flex",position:"absolute",zIndex:1001,left:"2%",bottom:"4%",color:"black",fontFamily:"'Roboto Condensed', Arial, Helvetica, sans-serif",fontWeight:"bold"},routePanel:{left:"2%",top:"2%",width:"15em"}},"@media only screen and (max-width: 768px)":{userLocationButton:{right:"4%",top:"2%"},filterButton:{left:"4%",top:"2%"},searchButton:{top:"2%",left:"50%",transform:"translateX(-50%)"},routePanel:{bottom:"0",width:"100%"}}}})(function(e){var t=e.submitFeedbackLocation,r=e.setCreationMapMode,n=e.mapMode,a=e.setUserLocation,o=e.currentUserLocation,c=e.setFilter,i=e.setSearch,s=e.selectedFilter,u=e.routeSummary,l=e.resetRoute,d=e.isMarkersFetching,f=e.classes,p=n===fe.READ;return B.createElement(B.Fragment,null,d?B.createElement(Yr.h,{className:f.progress}):null,B.createElement(Fa,{mapMode:n,currentUserLocation:o}),B.createElement("div",{className:f.searchButton},B.createElement(aa,{onChange:i})),B.createElement("div",{className:f.filterButton},B.createElement(Qn,{selectedFilter:s,setFilter:c})),B.createElement("div",{className:f.userLocationButton},B.createElement(Ln,{onClick:a})),n===fe.CREATE&&B.createElement(pa,null),u&&B.createElement("div",{className:f.routePanel},B.createElement(Na,{summary:u,resetRoute:l})),B.createElement("div",{className:f.contactUsWrapper},B.createElement(Yr.a,{variant:"contained",color:"primary",onClick:p?r:t,className:f.contactUs},p?"\u041d\u0430\u0448\u043b\u0438 \u0445\u0430\u043b\u044f\u0432\u0443?":"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c")),B.createElement(Yr.a,{variant:"contained",color:"primary",onClick:p?r:t,className:f.contactUsDesktop},p?"\u041d\u0430\u0448\u043b\u0438 \u0445\u0430\u043b\u044f\u0432\u0443?":"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"))}),xa=function(e){function t(){var e,r;Object(zr.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(Hr.a)(this,(e=Object(Jr.a)(t)).call.apply(e,[this].concat(a)))).setCreationMapMode=function(){var e=r.props,t=e.setMapMode;(0,e.setNewMarkerPositionOnMapViewport)(),t(fe.CREATE)},r.submitFeedbackLocation=function(){var e=r.props,t=e.openFeedbackSidebar;(0,e.getAddressFromCoordinates)(e.mapViewport.center),t()},r}return Object(Xr.a)(t,e),Object(Qr.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.getMarkerTypes)()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.lastGlobalError,n=t.enqueueSnackbar,a=Y.a.get(e.lastGlobalError,"errorId",null),o=Y.a.get(r,"errorId",null);a!==o&&null!==o&&n(r.errorMessage,{variant:"error"})}},{key:"render",value:function(){return W.a.createElement(La,Object.assign({},this.props,{setCreationMapMode:this.setCreationMapMode,submitFeedbackLocation:this.submitFeedbackLocation}))}}]),t}(B.Component),_a=Object(G.b)(function(e){return{isMarkersFetching:v.selectIsAllMarkersFetching(e),currentUserLocation:k.selectUserCurrentLocation(e),locationError:k.selectUserCurrentLocationError(e),selectedFilter:v.selectFilter(e),routeSummary:w.selectRouteSummary(e),lastGlobalError:a.selectLastError(e),mapViewport:e.shared.mapViewport,mapMode:a.selectMapMode(e)}},function(e){return{openFeedbackSidebar:function(){return e(Re())},setUserCurrentLocation:function(t){return e(Yt.setCurrentLocation(t))},setFilter:function(t){return e(g.setFilter(t))},setSearch:function(t){return e(g.setSearch(t))},setNewMarkerPosition:function(t){return e(g.setNewMarkerPosition(t))},getMarkerTypes:function(){return e(O.getMarkerTypes())},resetRoute:function(){return e(S.resetRoute())},setMapMode:function(t){return e(n.setMapMode(t))},getAddressFromCoordinates:function(t){return e(R.getAddressFromCoordinates(t))}}},function(e,t){var r=e.currentUserLocation,n=e.mapViewport;return Object(Oe.a)({},e,t,{setUserLocation:function(){r?t.setUserCurrentLocation(r.slice()):t.setUserCurrentLocation({code:1})},setNewMarkerPositionOnMapViewport:function(){t.setNewMarkerPosition(n.center)}})})(Object(z.withSnackbar)(xa)),Ua=function(){return W.a.createElement(G.a,{store:Gr()},W.a.createElement($.MuiThemeProvider,{theme:$r},W.a.createElement(z.SnackbarProvider,{maxSnack:M.MAX_SNACK,anchorOrigin:M.ANCHOR},W.a.createElement(V.a,{basename:"/map"},W.a.createElement(W.a.Fragment,null,W.a.createElement(K.c,null,W.a.createElement(K.a,{path:"/",component:_a})))))))},Ia=(r(5680),r(5681),document.getElementById("root"));Ia&&q.a.render(W.a.createElement(Ua,null),Ia)}},[[5492,1,2]]]);
//# sourceMappingURL=main.0f5a3233.chunk.js.map