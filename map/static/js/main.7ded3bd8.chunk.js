(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{158:function(e,t){},164:function(e,t){},165:function(e,t){},166:function(e,t,r){e.exports=r.p+"static/media/wifi.a5113c91.svg"},167:function(e,t,r){e.exports=r.p+"static/media/toilet.26830feb.svg"},168:function(e,t,r){e.exports=r.p+"static/media/socket.b9333000.svg"},169:function(e,t,r){e.exports=r.p+"static/media/water.b07a9540.svg"},170:function(e,t,r){e.exports=r.p+"static/media/user.c45c2ef8.svg"},171:function(e,t,r){e.exports=r.p+"static/media/empty-landmark.76edbd6f.svg"},5491:function(e,t,r){e.exports=r(5680)},5678:function(e,t,r){},5679:function(e,t,r){},5680:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"setError",function(){return ce}),r.d(n,"setMapMode",function(){return ie}),r.d(n,"setMapViewport",function(){return se});var a={};r.r(a),r.d(a,"selectLastError",function(){return he}),r.d(a,"selectMapMode",function(){return ge});var o={};r.r(o),r.d(o,"open",function(){return je}),r.d(o,"close",function(){return ye});var c={};r.r(c),r.d(c,"getMarkersRequest",function(){return Ne}),r.d(c,"getMarkersSuccess",function(){return Le}),r.d(c,"getMarkersError",function(){return _e});var i={};r.r(i),r.d(i,"createFeedback",function(){return Ye});var s={};r.r(s),r.d(s,"getWifi",function(){return Ze}),r.d(s,"getToilets",function(){return et}),r.d(s,"getSockets",function(){return tt}),r.d(s,"getWater",function(){return rt}),r.d(s,"getMarkerTypes",function(){return nt});var u={};r.r(u),r.d(u,"getRoute",function(){return at});var l={};r.r(l),r.d(l,"getAddress",function(){return ot});var d={};r.r(d),r.d(d,"getToilets",function(){return ct});var f={};r.r(f),r.d(f,"getMarkersRequest",function(){return lt}),r.d(f,"getMarkersSuccess",function(){return dt}),r.d(f,"getMarkersError",function(){return ft});var p={};r.r(p),r.d(p,"getWifi",function(){return bt});var m={};r.r(m),r.d(m,"getMarkersRequest",function(){return kt}),r.d(m,"getMarkersSuccess",function(){return vt}),r.d(m,"getMarkersError",function(){return Ot});var b={};r.r(b),r.d(b,"getSockets",function(){return yt});var E={};r.r(E),r.d(E,"getMarkersRequest",function(){return Tt}),r.d(E,"getMarkersSuccess",function(){return Ct}),r.d(E,"getMarkersError",function(){return Ft});var h={};r.r(h),r.d(h,"getWater",function(){return Nt});var g={};r.r(g),r.d(g,"setFilter",function(){return xt}),r.d(g,"setNewMarkerPosition",function(){return Ut}),r.d(g,"getTypesRequest",function(){return Pt}),r.d(g,"getTypesSuccess",function(){return It}),r.d(g,"getTypesError",function(){return Bt}),r.d(g,"toiletsActions",function(){return c}),r.d(g,"wifiActions",function(){return f}),r.d(g,"socketsActions",function(){return m}),r.d(g,"waterActions",function(){return E});var k={};r.r(k),r.d(k,"selectUserCurrentLocation",function(){return Ht}),r.d(k,"selectUserCurrentLocationError",function(){return Jt});var v={};r.r(v),r.d(v,"selectWifi",function(){return er}),r.d(v,"selectToilets",function(){return tr}),r.d(v,"selectSockets",function(){return rr}),r.d(v,"selectWater",function(){return nr}),r.d(v,"selectIsAllMarkersFetching",function(){return ar}),r.d(v,"selectFilter",function(){return or}),r.d(v,"selectNewMarkerPositionInGeoJSON",function(){return cr});var O={};r.r(O),r.d(O,"getMarkers",function(){return ir}),r.d(O,"getMarkerTypes",function(){return sr}),r.d(O,"wifiThunks",function(){return p}),r.d(O,"toiletsThunks",function(){return d}),r.d(O,"socketsThunks",function(){return b}),r.d(O,"waterThunks",function(){return h});var R={};r.r(R),r.d(R,"createFeedbackRequest",function(){return dr}),r.d(R,"createFeedbackSuccess",function(){return fr}),r.d(R,"createFeedbackError",function(){return pr}),r.d(R,"getAddressRequest",function(){return mr}),r.d(R,"getAddressSuccess",function(){return br}),r.d(R,"getAddressError",function(){return Er}),r.d(R,"resetAddress",function(){return hr});var j={};r.r(j),r.d(j,"createFeedback",function(){return Rr}),r.d(j,"getAddressFromCoordinates",function(){return jr});var y={};r.r(y),r.d(y,"getRouteRequest",function(){return Mr}),r.d(y,"getRouteSuccess",function(){return wr}),r.d(y,"getRouteError",function(){return Tr}),r.d(y,"resetRoute",function(){return Cr});var S={};r.r(S),r.d(S,"selectRoute",function(){return Lr}),r.d(S,"selectRouteSummary",function(){return _r});var M={};r.r(M),r.d(M,"getRoute",function(){return Ur});var w={};r.r(w),r.d(w,"MAX_SNACK",function(){return Wr}),r.d(w,"ANCHOR",function(){return Dr});var T,C,F,A,N,L,_,x,U,P,I,B=r(0),W=r.n(B),D=r(26),q=r.n(D),G=r(55),K=r(212),$=r(57),V=r(48),z=r(69),Q=r(32),H=r(208),J=r(209),X=r(84),Y=r.n(X),Z=r(5),ee=(T={},Object(Z.a)(T,1,"\u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044e."),Object(Z.a)(T,2,"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0438 \u043c\u0435\u0441\u0442\u043e\u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f."),Object(Z.a)(T,3,"\u0412\u0440\u0435\u043c\u044f \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u0432\u044b\u0448\u043b\u043e."),T),te=r(5684),re=r(210),ne=r.n(re),ae=Object(te.a)({SHARED:{SET_ERROR:function(e){return{errorId:ne.a.generate(),errorMessage:e}},SET_MAP_MODE:function(e){return{mode:e}},SET_MAP_VIEWPORT:function(e){return{viewport:e}}}}),oe=ae.shared,ce=oe.setError,ie=oe.setMapMode,se=oe.setMapViewport,ue=r(5685),le=r(24),de=r.n(le),fe={READ:"read",CREATE:"create"},pe={errorList:[],mapMode:fe.READ,mapViewport:{zoom:12,center:[53.9017,27.5429]}},me=Object(ue.a)((C={},Object(Z.a)(C,ce,function(e,t){var r=t.payload,n=r.errorMessage,a=r.errorId;return de()(e,{errorList:{$push:[{errorId:a,errorMessage:n}]}})}),Object(Z.a)(C,ie,function(e,t){var r=t.payload.mode;return de()(e,{mapMode:{$set:r}})}),Object(Z.a)(C,se,function(e,t){var r=t.payload.viewport;return de()(e,{mapViewport:{$set:r}})}),C),pe),be=me,Ee=r(33),he=Object(Ee.a)(function(e){return e.shared.errorList},function(e){return e.length>0?e[e.length-1]:null}),ge=function(e){return e.shared.mapMode},ke=(r(158),be),ve=function(e){return function(t){return function(r){if(r.error||Y.a.get(r,"payload.error",!1)){var a=r.payload;if(a.message&&"Network Error"===a.message&&e.dispatch(n.setError("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443.")),a.geolocationErrorCode){var o=ee[a.geolocationErrorCode];e.dispatch(n.setError(o))}}return t(r)}}},Oe=r(9),Re=r(135),je=Object(Re.a)("".concat("FEEDBACK_SIDEBAR","/OPEN")),ye=Object(Re.a)("".concat("FEEDBACK_SIDEBAR","/CLOSE")),Se=o.open,Me=o.close,we=Object(ue.a)((F={},Object(Z.a)(F,Se.toString(),function(e){return Object(Oe.a)({},e,{open:!0})}),Object(Z.a)(F,Me.toString(),function(e){return Object(Oe.a)({},e,{open:!1})}),F),{open:!1}),Te=we,Ce=Object(Q.combineReducers)({feedbackSidebar:Te}),Fe=Object(te.a)({MARKERS:{TOILETS:{GET_MARKERS_REQUEST:function(){},GET_MARKERS_SUCCESS:function(e){return{toilets:e}},GET_MARKERS_ERROR:function(e){return{error:e}}}}}),Ae=Fe.markers.toilets,Ne=Ae.getMarkersRequest,Le=Ae.getMarkersSuccess,_e=Ae.getMarkersError,xe=r(50),Ue=Object(ue.a)((A={},Object(Z.a)(A,Ne,function(e){return Object(Oe.a)({},e,{isFetching:!0})}),Object(Z.a)(A,Le,function(e,t){var r=t.payload.toilets.map(function(e){var t=e.location,r=Object(xe.a)(e,["location"]),n=t.coordinates;return Object(Oe.a)({},r,{location:n})});return Object(Oe.a)({},e,{isFetching:!1,markers:r})}),Object(Z.a)(A,_e,function(e,t){var r=t.payload.error;return Object(Oe.a)({},e,{isFetching:!1,error:r})}),A),{markers:[],error:{},isFetching:!1}),Pe=Ue,Ie=r(18),Be=r.n(Ie),We=r(29),De=r(41),qe=r.n(De),Ge=function(e){return function(t){return"".concat(e).concat(t)}}("https://finds-api-production.herokuapp.com/api"),Ke=function(){return Ge("/feedback")},$e=function(){return Ge("/wifi")},Ve=function(){return Ge("/toilets")},ze=function(){return Ge("/sockets")},Qe=function(){return Ge("/water")},He=function(){return Ge("/markers/types")},Je=function(){return Ge("/route")},Xe=function(e,t){return Ge("/location/geocoding/reverse/".concat(e,"/").concat(t))},Ye=function(e){var t=e.type,r=Object(xe.a)(e,["type"]),n=Object(Oe.a)({},r,{type:[t]});return qe.a.post(Ke(),n)},Ze=function(){return qe.a.get($e())},et=function(){return qe.a.get(Ve())},tt=function(){return qe.a.get(ze())},rt=function(){return qe.a.get(Qe())},nt=function(){return qe.a.get(He())},at=function(e,t){var r={point0:e,point1:t};return qe.a.post(Je(),r)},ot=function(e,t){return qe.a.get(Xe(e,t))},ct=function(){return function(){var e=Object(We.a)(Be.a.mark(function e(t){var r,n;return Be.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(Ne()),e.prev=1,e.next=4,s.getToilets();case 4:r=e.sent,n=r.data,t(Le(n)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),t(_e());case 13:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},it=Pe,st=Object(te.a)({MARKERS:{WIFI:{GET_MARKERS_REQUEST:function(){},GET_MARKERS_SUCCESS:function(e){return{wifi:e}},GET_MARKERS_ERROR:function(e){return{error:e}}}}}),ut=st.markers.wifi,lt=ut.getMarkersRequest,dt=ut.getMarkersSuccess,ft=ut.getMarkersError,pt=Object(ue.a)((N={},Object(Z.a)(N,lt,function(e){return Object(Oe.a)({},e,{isFetching:!0})}),Object(Z.a)(N,dt,function(e,t){var r=t.payload.wifi.map(function(e){var t=e.location,r=Object(xe.a)(e,["location"]),n=t.coordinates;return Object(Oe.a)({},r,{location:n})});return Object(Oe.a)({},e,{isFetching:!1,markers:r})}),Object(Z.a)(N,ft,function(e,t){var r=t.payload.error;return Object(Oe.a)({},e,{isFetching:!1,error:r})}),N),{markers:[],error:{},isFetching:!1}),mt=pt,bt=function(){return function(){var e=Object(We.a)(Be.a.mark(function e(t){var r,n;return Be.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(lt()),e.prev=1,e.next=4,s.getWifi();case 4:r=e.sent,n=r.data,t(dt(n)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),t(ft(e.t0));case 13:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},Et=mt,ht=Object(te.a)({MARKERS:{SOCKETS:{GET_MARKERS_REQUEST:function(){},GET_MARKERS_SUCCESS:function(e){return{sockets:e}},GET_MARKERS_ERROR:function(e){return{error:e}}}}}),gt=ht.markers.sockets,kt=gt.getMarkersRequest,vt=gt.getMarkersSuccess,Ot=gt.getMarkersError,Rt=Object(ue.a)((L={},Object(Z.a)(L,kt,function(e){return Object(Oe.a)({},e,{isFetching:!0})}),Object(Z.a)(L,vt,function(e,t){var r=t.payload.sockets.map(function(e){var t=e.location,r=Object(xe.a)(e,["location"]),n=t.coordinates;return Object(Oe.a)({},r,{location:n})});return Object(Oe.a)({},e,{isFetching:!1,markers:r})}),Object(Z.a)(L,Ot,function(e,t){var r=t.payload.error;return Object(Oe.a)({},e,{isFetching:!1,error:r})}),L),{markers:[],error:{},isFetching:!1}),jt=Rt,yt=function(){return function(){var e=Object(We.a)(Be.a.mark(function e(t){var r,n;return Be.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(kt()),e.prev=1,e.next=4,s.getSockets();case 4:r=e.sent,n=r.data,t(vt(n)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),t(Ot(e.t0));case 13:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},St=jt,Mt=Object(te.a)({MARKERS:{WATER:{GET_MARKERS_REQUEST:function(){},GET_MARKERS_SUCCESS:function(e){return{water:e}},GET_MARKERS_ERROR:function(e){return{error:e}}}}}),wt=Mt.markers.water,Tt=wt.getMarkersRequest,Ct=wt.getMarkersSuccess,Ft=wt.getMarkersError,At=Object(ue.a)((_={},Object(Z.a)(_,Tt,function(e){return Object(Oe.a)({},e,{isFetching:!0})}),Object(Z.a)(_,Ct,function(e,t){var r=t.payload.water.map(function(e){var t=e.location,r=Object(xe.a)(e,["location"]),n=t.coordinates;return Object(Oe.a)({},r,{location:n})});return Object(Oe.a)({},e,{isFetching:!1,markers:r})}),Object(Z.a)(_,Ft,function(e,t){var r=t.payload.error;return Object(Oe.a)({},e,{isFetching:!1,error:r})}),_),{markers:[],error:{},isFetching:!1}),Nt=function(){return function(){var e=Object(We.a)(Be.a.mark(function e(t){var r,n;return Be.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(Tt()),e.prev=1,e.next=4,s.getWater();case 4:r=e.sent,n=r.data,t(Ct(n)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),t(Ft(e.t0));case 13:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},Lt=At,_t=Object(te.a)({MARKERS:{SET_FILTER:function(e){return{filter:e}},SET_NEW_MARKER_POSITION:function(e){return{location:e}},GET_TYPES_REQUEST:function(){},GET_TYPES_SUCCESS:function(e){return{types:e}},GET_TYPES_ERROR:function(e){return{error:e}}}}).markers,xt=_t.setFilter,Ut=_t.setNewMarkerPosition,Pt=_t.getTypesRequest,It=_t.getTypesSuccess,Bt=_t.getTypesError,Wt=xt,Dt=Ut,qt=Pt,Gt=It,Kt=Bt,$t={selected:null,newMarkerPosition:null,markerTypes:[],isMarkerTypesFetching:!1,markerTypesError:null},Vt=Object(ue.a)((x={},Object(Z.a)(x,Wt,function(e,t){var r=t.payload.filter;return Object(Oe.a)({},e,{selected:r})}),Object(Z.a)(x,Dt,function(e,t){var r=t.payload.location;return Object(Oe.a)({},e,{newMarkerPosition:r})}),Object(Z.a)(x,qt,function(e){return Object(Oe.a)({},e,{isMarkerTypesFetching:!0,markerTypesError:$t.markerTypesError})}),Object(Z.a)(x,Gt,function(e,t){var r=t.payload.types;return Object(Oe.a)({},e,{isMarkerTypesFetching:!1,markerTypes:r})}),Object(Z.a)(x,Kt,function(e,t){var r=t.payload.error;return Object(Oe.a)({},e,{isMarkerTypesFetching:!1,markerTypesError:r})}),x),$t),zt=Object(Q.combineReducers)({shared:Vt,toilets:it,wifi:Et,sockets:St,water:Lt}),Qt=Object(te.a)({USER:{SET_CURRENT_LOCATION:function(e){return e.length?{currentLocation:e}:{error:!0,geolocationErrorCode:e.code,currentLocation:null}}}}).user,Ht=function(e){return e.user.currentLocation},Jt=function(e){return e.user.locationError},Xt=(r(164),Qt.setCurrentLocation),Yt=Object(ue.a)(Object(Z.a)({},Xt.toString(),function(e,t){var r=t.payload.currentLocation;return de()(e,{currentLocation:{$set:r}})}),{currentLocation:null,locationError:null}),Zt=function(e){return e.markers},er=Object(Ee.a)(Zt,function(e){return e.wifi.markers}),tr=Object(Ee.a)(Zt,function(e){return e.toilets.markers}),rr=Object(Ee.a)(Zt,function(e){return e.sockets.markers}),nr=Object(Ee.a)(Zt,function(e){return e.water.markers}),ar=Object(Ee.a)(Zt,function(e){return e.wifi.isFetching||e.toilets.isFetching||e.sockets.isFetching||e.water.isFetching}),or=Object(Ee.a)(Zt,function(e){return e.shared.selected}),cr=Object(Ee.a)([function(e){return e.markers.shared.newMarkerPosition},k.selectUserCurrentLocation],function(e,t){return e||t}),ir=function(){return function(){var e=Object(We.a)(Be.a.mark(function e(t){return Be.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t(p.getWifi()),t(d.getToilets()),t(b.getSockets()),t(h.getWater())]);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},sr=function(){return function(){var e=Object(We.a)(Be.a.mark(function e(t){var r,n;return Be.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(Pt()),e.prev=1,e.next=4,s.getMarkerTypes();case 4:r=e.sent,n=r.data,t(It(n)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),t(Bt(e.t0));case 13:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},ur=zt,lr=Object(te.a)({FEEDBACK:{CREATE_FEEDBACK_REQUEST:function(){},CREATE_FEEDBACK_SUCCESS:function(){},CREATE_FEEDBACK_ERROR:function(e){return{error:e}},GET_ADDRESS_REQUEST:function(){},GET_ADDRESS_SUCCESS:function(e){return{address:e}},GET_ADDRESS_ERROR:function(e){return{error:e}},RESET_ADDRESS:function(){}}}).feedback,dr=lr.createFeedbackRequest,fr=lr.createFeedbackSuccess,pr=lr.createFeedbackError,mr=lr.getAddressRequest,br=lr.getAddressSuccess,Er=lr.getAddressError,hr=lr.resetAddress,gr=Object(ue.a)((U={},Object(Z.a)(U,dr,function(e){return de()(e,{isLoading:{$set:!0}})}),Object(Z.a)(U,fr,function(e){return de()(e,{isLoading:{$set:!1}})}),Object(Z.a)(U,pr,function(e,t){var r=t.payload.error;return de()(e,{isLoading:{$set:!1},error:{$set:r}})}),U),{feedback:null,error:{},isLoading:!1}),kr={suggestedAddress:null,feedbackAddressError:null,isFeedbackAddressLoading:!1},vr=Object(ue.a)((P={},Object(Z.a)(P,mr,function(e){return de()(e,{isFeedbackAddressLoading:{$set:!0},feedbackAddressError:{$set:kr.feedbackAddressError}})}),Object(Z.a)(P,br,function(e,t){var r=t.payload.address;return de()(e,{suggestedAddress:{$set:r},isFeedbackAddressLoading:{$set:!1}})}),Object(Z.a)(P,Er,function(e,t){var r=t.payload.error;return de()(e,{isFeedbackAddressLoading:{$set:!1},feedbackAddressError:{$set:r}})}),Object(Z.a)(P,hr,function(e){return de()(e,{isFeedbackAddressLoading:{$set:kr.isFeedbackAddressLoading},feedbackAddressError:{$set:kr.feedbackAddressError},suggestedAddress:{$set:kr.suggestedAddress}})}),P),kr),Or=Object(Q.combineReducers)({feedback:gr,feedbackAddress:vr}),Rr=(r(165),function(e){return function(){var t=Object(We.a)(Be.a.mark(function t(r){return Be.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r(dr()),t.prev=1,t.next=4,i.createFeedback(e);case 4:r(fr()),t.next=12;break;case 7:throw t.prev=7,t.t0=t.catch(1),console.error(t.t0),r(pr(t.t0)),t.t0;case 12:case"end":return t.stop()}},t,this,[[1,7]])}));return function(e){return t.apply(this,arguments)}}()}),jr=function(e){return function(){var t=Object(We.a)(Be.a.mark(function t(r){var n,a;return Be.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r(mr()),t.prev=1,t.next=4,l.getAddress(e[0],e[1]);case 4:n=t.sent,a=n.data,r(br(a)),t.next=14;break;case 9:throw t.prev=9,t.t0=t.catch(1),console.error(t.t0),r(Er(t.t0)),t.t0;case 14:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()},yr=Or,Sr=Object(te.a)({ROUTING:{GET_ROUTE_REQUEST:function(e){return{marker:e}},GET_ROUTE_SUCCESS:function(e){return{route:e}},GET_ROUTE_ERROR:function(e){return{error:e}},RESET_ROUTE:function(){}}}).routing,Mr=Sr.getRouteRequest,wr=Sr.getRouteSuccess,Tr=Sr.getRouteError,Cr=Sr.resetRoute,Fr={marker:null,route:null,isFetching:!1,error:null},Ar=Object(ue.a)((I={},Object(Z.a)(I,Mr,function(e,t){var r=t.payload.marker;return de()(e,{marker:{$set:r},isFetching:{$set:!0},error:{$set:Fr.error}})}),Object(Z.a)(I,wr,function(e,t){var r=t.payload.route;return de()(e,{isFetching:{$set:!1},route:{$set:r}})}),Object(Z.a)(I,Tr,function(e,t){var r=t.payload.error;return de()(e,{isFetching:{$set:!1},error:{$set:r}})}),Object(Z.a)(I,Cr,function(e){return de()(e,{route:{$set:null}})}),Object(Z.a)(I,g.setFilter,function(e,t){return t.payload.filter?de()(e,{error:{$set:null},route:{$set:null}}):e}),I),Fr),Nr=function(e){return e.routing.route},Lr=Object(Ee.a)(Nr,function(e){return e?e.leg:null}),_r=Object(Ee.a)([Nr,function(e){return e.routing.marker}],function(e,t){return e?{summary:e.summary,marker:t}:null}),xr=function(e){var t=e.response.route[0],r=t.leg,n=t.summary;return{leg:r[0],summary:n}},Ur=function(e,t){return function(){var r=Object(We.a)(Be.a.mark(function r(n){var a,o,c;return Be.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=t.location,n(Mr(t)),r.prev=2,r.next=5,u.getRoute(e,a);case 5:o=r.sent,c=xr(o.data),n(wr(c)),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(2),n(Tr(r.t0));case 13:case"end":return r.stop()}},r,this,[[2,10]])}));return function(e){return r.apply(this,arguments)}}()},Pr={user:Yt,ui:Ce,markers:ur,feedback:yr,routing:Ar,shared:ke},Ir=Object(Q.combineReducers)(Pr),Br=function(){var e=Object(Q.applyMiddleware)(J.a,ve),t=Object(H.composeWithDevTools)({})(e);return Object(Q.createStore)(Ir,t)},Wr=3,Dr={vertical:"bottom",horizontal:"right"},qr=Object(V.createMuiTheme)({palette:{primary:{main:"#f4c844"},secondary:{main:"#e53935"}},typography:{useNextVariants:!0}}),Gr=r(36),Kr=r(37),$r=r(39),Vr=r(38),zr=r(40),Qr=r(4),Hr=r(5681),Jr=r(5687),Xr=r(22),Yr=r(12),Zr=r.n(Yr),en=r(166),tn=r.n(en),rn=r(167),nn=r.n(rn),an=r(168),on=r.n(an),cn=r(169),sn=r.n(cn),un=r(170),ln=r.n(un),dn=r(171),fn=r.n(dn),pn=[25,37],mn={iconUrl:nn.a,iconSize:pn},bn=new Zr.a.Icon(mn),En=Object(V.withStyles)(function(){return{routeButton:{paddingTop:0,paddingBottom:0,"&:hover":{backgroundColor:"transparent"}},content:{width:250,fontSize:13},point:{fontWeight:"bold"},title:{fontWeight:"bold"}}})(function(e){var t=e.toilet,r=e.classes,n=e.buildRoute;return B.createElement(Hr.a,{icon:bn,position:t.location,onDblclick:function(){n(t)()}},B.createElement(Jr.a,{autoPan:!1},B.createElement("div",{className:r.content},B.createElement("span",{className:r.title},"\u0422\u0443\u0430\u043b\u0435\u0442"),B.createElement(Qr.f,{disableRipple:!0,className:r.routeButton,onClick:n(t)},B.createElement(Xr.c,null)),B.createElement("br",null),B.createElement("br",null),B.createElement("span",{className:r.point},"\u0410\u0434\u0440\u0435\u0441: "),B.createElement("span",null,t.address),B.createElement("br",null),B.createElement("br",null),B.createElement("span",{className:r.point},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: "),B.createElement("span",null,t.description||"\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"))))}),hn={iconUrl:tn.a,iconSize:pn},gn=new Zr.a.Icon(hn),kn=Object(V.withStyles)(function(){return{routeButton:{paddingTop:0,paddingBottom:0,"&:hover":{backgroundColor:"transparent"}},content:{width:250,fontSize:13},point:{fontWeight:"bold"},title:{fontWeight:"bold"}}})(function(e){var t=e.wifi,r=e.classes,n=e.buildRoute;return B.createElement(Hr.a,{icon:gn,position:t.location,onDblclick:function(){n(t)()}},B.createElement(Jr.a,{autoPan:!1},B.createElement("div",{className:r.content},B.createElement("span",{className:r.point},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: "),B.createElement("span",{className:r.title},t.title),B.createElement(Qr.f,{disableRipple:!0,className:r.routeButton,onClick:n(t)},B.createElement(Xr.c,null)),B.createElement("br",null),B.createElement("br",null),B.createElement("span",{className:r.point},"\u0410\u0434\u0440\u0435\u0441: "),B.createElement("span",null,t.address),B.createElement("br",null),B.createElement("br",null),B.createElement("span",{className:r.point},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: "),B.createElement("span",null,t.description))))}),vn={iconUrl:on.a,iconSize:pn},On=new Zr.a.Icon(vn),Rn=Object(V.withStyles)(function(){return{routeButton:{paddingTop:0,paddingBottom:0,"&:hover":{backgroundColor:"transparent"}},content:{width:250,fontSize:13},point:{fontWeight:"bold"},title:{fontWeight:"bold"}}})(function(e){var t=e.socket,r=e.classes,n=e.buildRoute;return B.createElement(Hr.a,{icon:On,position:t.location,onDblclick:function(){n(t)()}},B.createElement(Jr.a,{autoPan:!1},B.createElement("div",{className:r.content},B.createElement("span",{className:r.title},"\u0420\u043e\u0437\u0435\u0442\u043a\u0430"),B.createElement(Qr.f,{disableRipple:!0,className:r.routeButton,onClick:n(t)},B.createElement(Xr.c,null)),B.createElement("br",null),B.createElement("br",null),B.createElement("span",{className:r.point},"\u0410\u0434\u0440\u0435\u0441: "),B.createElement("span",null,t.address),B.createElement("br",null),B.createElement("br",null),B.createElement("span",{className:r.point},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: "),B.createElement("span",null,t.description||"\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"))))}),jn={iconUrl:sn.a,iconSize:pn},yn=new Zr.a.Icon(jn),Sn=Object(V.withStyles)(function(){return{routeButton:{paddingTop:0,paddingBottom:0,"&:hover":{backgroundColor:"transparent"}},content:{width:250,fontSize:13},point:{fontWeight:"bold"},title:{fontWeight:"bold"}}})(function(e){var t=e.water,r=e.classes,n=e.buildRoute;return B.createElement(Hr.a,{icon:yn,position:t.location,onDblclick:function(){n(t)()}},B.createElement(Jr.a,{autoPan:!1},B.createElement("div",{className:r.content},B.createElement("span",{className:r.title},"\u0412\u043e\u0434\u0430"),B.createElement(Qr.f,{disableRipple:!0,className:r.routeButton,onClick:n(t)},B.createElement(Xr.c,null)),B.createElement("br",null),B.createElement("br",null),B.createElement("span",{className:r.point},"\u0410\u0434\u0440\u0435\u0441: "),B.createElement("span",null,t.address),B.createElement("br",null),B.createElement("br",null),B.createElement("span",{className:r.point},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: "),B.createElement("span",null,t.description||"\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"))))}),Mn={iconUrl:ln.a,iconSize:[25,25]},wn=new Zr.a.Icon(Mn),Tn=function(e){var t=e.location;return B.createElement(Hr.a,{icon:wn,zIndexOffset:1e4,position:t})},Cn=function(e){var t=e.onClick;return W.a.createElement(Qr.c,{color:"primary",onClick:t},W.a.createElement(Xr.f,{color:"inherit"}))},Fn=r(72),An=function(e){return{filter:{},drop:{display:"flex",flexDirection:"column",alignItems:"center"},button:{},open:{display:"flex"},close:{display:"none"},mainButton:{},optionButton:{marginTop:15},"@media only screen and (min-width: 768px)":{filter:{top:"2%",left:"2%"}}}},Nn=Object(V.withStyles)(An)(function(e){var t=e.Icon,r=e.filter,n=e.onClick,a=e.classes,o=e.isSelected;return B.createElement(Qr.c,{className:Object(Fn.a)([a.button,a.optionButton]),color:o?"primary":"default",onClick:n(r),size:"small"},B.createElement(t,null))}),Ln={label:"all",value:null},_n={label:"wifi",value:1},xn={label:"toilet",value:2},Un={label:"socket",value:3},Pn={label:"water",value:4},In=function(){return B.createElement(Xr.j,{color:"inherit"})},Bn=function(){return B.createElement(Xr.h,{color:"inherit"})},Wn=function(){return B.createElement(Xr.i,{color:"inherit"})},Dn=function(){return B.createElement(Xr.k,{color:"inherit"})},qn=function(){return B.createElement(Xr.a,{color:"inherit"})},Gn=function(e){function t(){var e,r;Object(Gr.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object($r.a)(this,(e=Object(Vr.a)(t)).call.apply(e,[this].concat(a)))).state={open:!1},r.onFilterClick=function(e){return function(){(0,r.props.setFilter)(e)}},r.toggle=function(){r.setState(function(e){return{open:!e.open}})},r}return Object(zr.a)(t,e),Object(Kr.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,r=e.selectedFilter,n=this.state.open;return W.a.createElement("div",{className:Object(Fn.a)([t.filter])},W.a.createElement(Qr.c,{className:Object(Fn.a)([t.button,t.mainButton]),color:"primary",onClick:this.toggle},W.a.createElement(Xr.e,{color:"inherit"})),W.a.createElement("div",{className:Object(Fn.a)([n?t.open:t.close,t.drop])},W.a.createElement(Nn,{isSelected:null===r,filter:Ln.value,onClick:this.onFilterClick,Icon:qn}),W.a.createElement(Nn,{isSelected:r===xn.value,filter:xn.value,onClick:this.onFilterClick,Icon:In}),W.a.createElement(Nn,{isSelected:r===_n.value,filter:_n.value,onClick:this.onFilterClick,Icon:Dn}),W.a.createElement(Nn,{isSelected:r===Un.value,filter:Un.value,onClick:this.onFilterClick,Icon:Bn}),W.a.createElement(Nn,{isSelected:r===Pn.value,filter:Pn.value,onClick:this.onFilterClick,Icon:Wn})))}}]),t}(B.Component),Kn=Object(V.withStyles)(An)(Gn),$n=function(e){var t=[];return e.author&&e.author.trim()||t.push("author"),e.address&&e.address.trim()||t.push("address"),{errors:t,hasErrors:0!==t.length}},Vn=function(e){var t="";return t+=e.street?"".concat(e.street,", "):"",t+=e.house?"".concat(e.house,", "):"",t+=e.city?"".concat(e.city):"",console.log("format"),console.log(t),console.log(e),t},zn=Object(V.createMuiTheme)({palette:{primary:{main:"#4caf50",contrastText:"#fff"},secondary:{main:"#d14942"}}}),Qn=Object(V.withStyles)(function(e){return Object(Z.a)({sidebarRoot:{width:"100%",overflowX:"hidden"},sidebarTitle:{padding:16,paddingBottom:0},sidebarTitleContent:{fontFamily:"'Roboto Condensed', Arial, Helvetica, sans-serif",fontWeight:"bold"},fieldsContainer:{margin:0},formField:{margin:12,width:"93%"},buttonsContainer:{display:"flex",justifyContent:"space-around"}},e.breakpoints.up("sm"),{sidebarRoot:{width:340}})})(function(e){var t=e.feedback,r=e.freebieTypes,n=e.isFeedbackAddressLoading,a=e.errors,o=e.open,c=e.isOpen,i=e.cancel,s=e.submit,u=e.handleFieldChange,l=e.classes,d=function(e){return function(t){return e.includes(t)}}(a);return B.createElement(V.MuiThemeProvider,{theme:zn},B.createElement(Qr.p,{open:c,onClose:i,onOpen:o,anchor:"left",classes:{paper:l.sidebarRoot}},B.createElement(Qr.e,{container:!0},B.createElement(Qr.e,{item:!0,xs:12},n?B.createElement(Qr.h,{color:"primary"}):null,B.createElement("div",{className:l.sidebarTitle},B.createElement(Qr.r,{className:l.sidebarTitleContent,variant:"headline",gutterBottom:!0,align:"center"},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u0435\u0441\u044c \u0445\u0430\u043b\u044f\u0432\u043e\u0439 \u0441 \u0434\u0440\u0443\u0433\u0438\u043c\u0438!"))),B.createElement(Qr.e,{className:l.fieldsContainer,container:!0,spacing:24},B.createElement(Qr.e,{item:!0,xs:12},B.createElement(Qr.d,{error:d("address"),required:!0,fullWidth:!0,className:l.formField},B.createElement(Qr.q,{error:d("address"),required:!0,onChange:u("address"),value:t.address||"",InputLabelProps:{shrink:!0},placeholder:"\u0443\u043b. \u0425\u0430\u043b\u044f\u0432\u0438\u043d\u0430, 7",label:"\u041c\u0435\u0441\u0442\u043e \u0445\u0430\u043b\u044f\u0432\u044b",fullWidth:!0}))),B.createElement(Qr.e,{item:!0,xs:12},B.createElement(Qr.d,{error:d("type"),required:!0,fullWidth:!0,className:l.formField},B.createElement(Qr.g,{required:!0,error:d("type"),htmlFor:"freebieType"},"\u0412\u0438\u0434 \u0445\u0430\u043b\u044f\u0432\u044b"),B.createElement(Qr.o,{error:d("type"),onChange:u("type"),value:t.type,inputProps:{id:"freebieType",name:"freebieType"},fullWidth:!0},r.map(function(e){return B.createElement(Qr.m,{key:e.value,value:e.value},e.label)})))),B.createElement(Qr.e,{item:!0,xs:12},B.createElement(Qr.d,{error:d("author"),required:!0,fullWidth:!0,className:l.formField},B.createElement(Qr.q,{error:d("author"),required:!0,onChange:u("author"),value:t.author,placeholder:"\u0410\u0432\u0442\u043e\u0440",label:"Freebee",InputLabelProps:{shrink:!0},fullWidth:!0}))),B.createElement(Qr.e,{item:!0,xs:12},B.createElement(Qr.d,{fullWidth:!0,className:l.formField},B.createElement(Qr.q,{onChange:u("description"),value:t.description,multiline:!0,placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u043e\u0439 \u0445\u0430\u043b\u044f\u0432\u044b",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",InputLabelProps:{shrink:!0},fullWidth:!0}))),B.createElement(Qr.e,{item:!0,xs:12},B.createElement(Qr.e,{container:!0,className:l.buttonsContainer},B.createElement(Qr.a,{onClick:i,variant:"contained",color:"secondary"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),B.createElement(Qr.a,{variant:"contained",type:"submit",color:"primary",onClick:s},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))))))}),Hn={address:null,type:[""],author:"",description:"",errors:[]},Jn=function(e){function t(){var e,r;Object(Gr.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object($r.a)(this,(e=Object(Vr.a)(t)).call.apply(e,[this].concat(a)))).state=Hn,r.handleFieldChange=function(e){return function(t){r.setState(Object(Z.a)({},e,t.target.value))}},r.handleSubmit=function(){var e=r.props,t=e.closeSidebar,n=e.sendFeedback,a=e.setReadMapMode,o=e.location,c=r.state,i=c.type,s=c.address,u=c.author,l=c.description,d={location:o,address:s,type:i.toString(),author:u,description:l},f=$n(d);f.hasErrors?r.setState({errors:f.errors}):(n(d).then(function(){r.props.enqueueSnackbar("\u0425\u0430\u043b\u044f\u0432\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430!",{variant:"success"})}).catch(function(){r.props.enqueueSnackbar("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0445\u0430\u043b\u044f\u0432\u044b!",{variant:"error"})}),a(),t(),r.setState(Object(Oe.a)({},Hn)))},r.handleCancel=function(){var e=r.props,t=e.closeSidebar,n=e.setReadMapMode,a=e.resetSuggestedAddress;n(),a(),r.setState(Object(Oe.a)({},Hn)),t()},r}return Object(zr.a)(t,e),Object(Kr.a)(t,[{key:"componentDidUpdate",value:function(){var e=this.state,t=e.type,r=e.address,n=this.props,a=n.freebieTypes,o=n.suggestedAddress;t===Hn.type&&0!==a.length&&this.setState({type:a[0].value}),null===r&&null!==o&&this.setState({address:Vn(o.address)})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,r=e.openSidebar,n=e.freebieTypes,a=e.isFeedbackAddressLoading,o=this.state,c=o.address,i=o.author,s=o.type,u=o.description,l=o.errors;if(0===n.length)return null;var d={address:c,author:i,type:s,description:u};return W.a.createElement(Qn,{feedback:d,isFeedbackAddressLoading:a,errors:l,freebieTypes:n,isOpen:t,open:r,submit:this.handleSubmit,cancel:this.handleCancel,handleFieldChange:this.handleFieldChange})}}]),t}(B.Component),Xn=j.createFeedback,Yn={closeSidebar:ye,openSidebar:je,sendFeedback:Xn,resetSuggestedAddress:function(){return R.resetAddress()},setReadMapMode:function(){return n.setMapMode(fe.READ)}},Zn=Object(G.b)(function(e){return Object(Oe.a)({isOpen:e.ui.feedbackSidebar.open,location:v.selectNewMarkerPositionInGeoJSON(e),freebieTypes:e.markers.shared.markerTypes},e.feedback.feedbackAddress)},Yn)(Object(z.withSnackbar)(Jn)),ea=r(5686),ta=r(5688),ra=r(5682),na=r(5683),aa=r(214),oa=function(e){return[e.latitude,e.longitude]},ca=function(e){if(!e)return[];var t=e.maneuver.map(function(e){var t=e.position;return oa(t)}),r=oa(e.start.originalPosition),n=oa(e.end.originalPosition);return[r].concat(Object(aa.a)(t),[n])},ia=(r(5670),{iconUrl:fn.a,iconSize:pn,className:"NewMarkerIcon"}),sa=new Zr.a.Icon(ia),ua=function(e){function t(){var e,r;Object(Gr.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object($r.a)(this,(e=Object(Vr.a)(t)).call.apply(e,[this].concat(a)))).refNewMarker=Object(B.createRef)(),r.setMapRef=function(e){r.map=e},r.handleViewportChanged=function(e){var t=r.props,n=t.setMapViewport,a=t.setNewMarkerPosition,o=t.mapMode;if(n(e),o===fe.CREATE){var c=r.refNewMarker.current;c&&(a(e.center),c.leafletElement.setLatLng(e.center))}},r.buildRouteToMarker=function(e){return function(){(0,r.props.buildRoute)(e)}},r}return Object(zr.a)(t,e),Object(Kr.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.userLocation,r=this.map.leafletElement;null!==t&&e.userLocation!==t&&r.panTo(t)}},{key:"render",value:function(){var e=this,t=this.props,r=t.classes,n=t.wifi,a=t.toilets,o=t.sockets,c=t.water,i=t.userLocation,s=t.route,u=t.mapMode,l=t.mapViewport;return W.a.createElement(ea.a,{className:r.map,viewport:l,onViewportChanged:this.handleViewportChanged,zoomControl:!1,ref:this.setMapRef,maxZoom:19},W.a.createElement(ta.a,{attribution:"&amp;copy <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),u===fe.CREATE&&W.a.createElement(ra.a,null,W.a.createElement(Hr.a,{zIndexOffset:1100,icon:sa,position:l.center,ref:this.refNewMarker})),W.a.createElement(ra.a,null,i&&W.a.createElement(Tn,{key:i.toString(),location:i})),W.a.createElement(ra.a,null,n.map(function(t){return W.a.createElement(kn,{key:t.id,buildRoute:e.buildRouteToMarker,wifi:t})}),a.map(function(t){return W.a.createElement(En,{key:t.id,buildRoute:e.buildRouteToMarker,toilet:t})}),o.map(function(t){return W.a.createElement(Rn,{key:t.id,buildRoute:e.buildRouteToMarker,socket:t})}),c.map(function(t){return W.a.createElement(Sn,{key:t.id,buildRoute:e.buildRouteToMarker,water:t})})),W.a.createElement(ra.a,null,W.a.createElement(na.a,{color:"#3f51b5",positions:ca(s)})))}}]),t}(B.Component);ua.defaultProps={wifi:[],toilets:[],sockets:[],water:[]};var la=Object(V.withStyles)(function(){return{map:{height:"100vh",width:"100vw"}}})(ua),da=function(e){function t(){var e,r;Object(Gr.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object($r.a)(this,(e=Object(Vr.a)(t)).call.apply(e,[this].concat(a)))).getUserLocation=function(){var e=r.props.setCurrentLocation;navigator.geolocation.getCurrentPosition(function(t){var r=t.coords,n=r.latitude,a=r.longitude;e([n,a])},function(t){console.error(t),e(t)})},r.buildRoute=function(e){var t=r.props,n=t.getRoute,a=t.currentUserLocation;null!==a&&n(a,e)},r}return Object(zr.a)(t,e),Object(Kr.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.getMarkers)(),this.getUserLocation()}},{key:"render",value:function(){var e=this.props,t=e.wifi,r=e.toilets,n=e.sockets,a=e.water,o=e.currentUserLocation,c=e.route,i=e.mapMode,s=e.setNewMarkerPosition,u=e.mapViewport,l=e.setMapViewport;return W.a.createElement(la,{wifi:t,toilets:r,sockets:n,water:a,route:c,userLocation:o,mapMode:i,buildRoute:this.buildRoute,setNewMarkerPosition:s,setMapViewport:l,mapViewport:u})}}]),t}(B.Component);da.defaultProps={wifi:[],toilets:[],sockets:[],water:[]};var fa=O.getMarkers,pa=M.getRoute,ma=Qt.setCurrentLocation,ba=Object(G.b)(function(e){var t=v.selectFilter(e),r=[],n=[],a=[],o=[];return t===Ln.value&&(r=v.selectWifi(e),n=v.selectToilets(e),a=v.selectSockets(e),o=v.selectWater(e)),t===_n.value&&(r=v.selectWifi(e)),t===xn.value&&(n=v.selectToilets(e)),t===Un.value&&(a=v.selectSockets(e)),t===Pn.value&&(o=v.selectWater(e)),{wifi:r,toilets:n,sockets:a,water:o,filter:t,route:S.selectRoute(e),mapViewport:e.shared.mapViewport,newMarkerPosition:e.markers.shared.newMarkerPosition}},function(e){return{getMarkers:function(){return e(fa())},getRoute:function(t,r){return e(pa(t,r))},setCurrentLocation:function(t){return e(ma(t))},setNewMarkerPosition:function(t){return e(g.setNewMarkerPosition(t))},setMapViewport:function(t){return e(n.setMapViewport(t))}}})(da),Ea=function(e){function t(){return Object(Gr.a)(this,t),Object($r.a)(this,Object(Vr.a)(t).apply(this,arguments))}return Object(zr.a)(t,e),Object(Kr.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,r=e.summary,n=r.summary,a=r.marker,o=e.resetRoute,c=function(e){var t=e.travelTime/60;if(t<=60)return"".concat(Math.ceil(t)," \u043c\u0438\u043d\u0443\u0442");var r=t/60;return"".concat(Math.ceil(r)," \u0447\u0430\u0441\u043e\u0432")}(n),i=function(e){var t=e.distance;return t<1e3?"".concat(t," \u043c"):"".concat(Math.ceil(t/1e3)," \u043a\u043c")}(n);return W.a.createElement(Qr.n,{className:t.root},W.a.createElement("div",{className:t.header},W.a.createElement(Qr.r,{variant:"subtitle1",gutterBottom:!0},"\u0410\u0434\u0440\u0435\u0441: ".concat(a.address)),W.a.createElement(Qr.f,{onClick:o,classes:{root:t.closeButtonRoot},className:t.closeButton},W.a.createElement(Xr.b,null))),W.a.createElement(Qr.b,null),W.a.createElement(Qr.i,null,W.a.createElement(Qr.j,{disableGutters:!0},W.a.createElement(Qr.k,null,W.a.createElement(Xr.g,null)),W.a.createElement(Qr.l,null,i)),W.a.createElement(Qr.j,{disableGutters:!0},W.a.createElement(Qr.k,null,W.a.createElement(Xr.d,null)),W.a.createElement(Qr.l,null,c))))}}]),t}(B.PureComponent),ha=Object(V.withStyles)(function(){return{root:{height:"100%",padding:"1em 1.5em"},header:{display:"flex",justifyContent:"space-between",alignItems:"center"},closeButton:{color:"red",marginBottom:"0.35em"},closeButtonRoot:{padding:0,height:25}}})(Ea),ga=Object(V.withStyles)(function(){return{progress:{position:"absolute",width:"100%",zIndex:1005},filterButton:{position:"absolute",zIndex:1001},routePanel:{position:"absolute",height:"auto",zIndex:1001},userLocationButton:{position:"absolute",zIndex:1002},contactUsWrapper:{position:"absolute",bottom:0,width:"100%",zIndex:1e3},contactUs:{width:"100%",borderRadius:0,fontFamily:"'Roboto Condensed', Arial, Helvetica, sans-serif",fontWeight:"bold"},contactUsDesktop:{display:"none"},"@media only screen and (min-width: 768px)":{contactUs:{display:"none"},userLocationButton:{right:"2%",bottom:"4%"},filterButton:{top:"2%",right:"2%"},contactUsDesktop:{display:"inline-flex",position:"absolute",zIndex:1001,left:"2%",bottom:"4%",color:"black",fontFamily:"'Roboto Condensed', Arial, Helvetica, sans-serif",fontWeight:"bold"},routePanel:{left:"2%",top:"2%",width:"15em"}},"@media only screen and (max-width: 768px)":{userLocationButton:{right:"4%",top:"2%"},filterButton:{left:"4%",top:"2%"},routePanel:{bottom:"0",width:"100%"}}}})(function(e){var t=e.submitFeedbackLocation,r=e.setCreationMapMode,n=e.mapMode,a=e.setUserLocation,o=e.currentUserLocation,c=e.setFilter,i=e.selectedFilter,s=e.routeSummary,u=e.resetRoute,l=e.isMarkersFetching,d=e.classes,f=n===fe.READ;return B.createElement(B.Fragment,null,l?B.createElement(Qr.h,{className:d.progress}):null,B.createElement(ba,{mapMode:n,currentUserLocation:o}),B.createElement("div",{className:d.filterButton},B.createElement(Kn,{selectedFilter:i,setFilter:c})),B.createElement("div",{className:d.userLocationButton},B.createElement(Cn,{onClick:a})),n===fe.CREATE&&B.createElement(Zn,null),s&&B.createElement("div",{className:d.routePanel},B.createElement(ha,{summary:s,resetRoute:u})),B.createElement("div",{className:d.contactUsWrapper},B.createElement(Qr.a,{variant:"contained",color:"primary",onClick:f?r:t,className:d.contactUs},f?"\u041d\u0430\u0448\u043b\u0438 \u0445\u0430\u043b\u044f\u0432\u0443?":"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c")),B.createElement(Qr.a,{variant:"contained",color:"primary",onClick:f?r:t,className:d.contactUsDesktop},f?"\u041d\u0430\u0448\u043b\u0438 \u0445\u0430\u043b\u044f\u0432\u0443?":"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"))}),ka=function(e){function t(){var e,r;Object(Gr.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object($r.a)(this,(e=Object(Vr.a)(t)).call.apply(e,[this].concat(a)))).setCreationMapMode=function(){var e=r.props,t=e.setMapMode;(0,e.setNewMarkerPositionOnMapViewport)(),t(fe.CREATE)},r.submitFeedbackLocation=function(){var e=r.props,t=e.openFeedbackSidebar;(0,e.getAddressFromCoordinates)(e.mapViewport.center),t()},r}return Object(zr.a)(t,e),Object(Kr.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.getMarkerTypes)()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.lastGlobalError,n=t.enqueueSnackbar,a=Y.a.get(e.lastGlobalError,"errorId",null),o=Y.a.get(r,"errorId",null);a!==o&&null!==o&&n(r.errorMessage,{variant:"error"})}},{key:"render",value:function(){return W.a.createElement(ga,Object.assign({},this.props,{setCreationMapMode:this.setCreationMapMode,submitFeedbackLocation:this.submitFeedbackLocation}))}}]),t}(B.Component),va=Object(G.b)(function(e){return{isMarkersFetching:v.selectIsAllMarkersFetching(e),currentUserLocation:k.selectUserCurrentLocation(e),locationError:k.selectUserCurrentLocationError(e),selectedFilter:v.selectFilter(e),routeSummary:S.selectRouteSummary(e),lastGlobalError:a.selectLastError(e),mapViewport:e.shared.mapViewport,mapMode:a.selectMapMode(e)}},function(e){return{openFeedbackSidebar:function(){return e(je())},setUserCurrentLocation:function(t){return e(Qt.setCurrentLocation(t))},setFilter:function(t){return e(g.setFilter(t))},setNewMarkerPosition:function(t){return e(g.setNewMarkerPosition(t))},getMarkerTypes:function(){return e(O.getMarkerTypes())},resetRoute:function(){return e(y.resetRoute())},setMapMode:function(t){return e(n.setMapMode(t))},getAddressFromCoordinates:function(t){return e(j.getAddressFromCoordinates(t))}}},function(e,t){var r=e.currentUserLocation,n=e.mapViewport;return Object(Oe.a)({},e,t,{setUserLocation:function(){r?t.setUserCurrentLocation(r.slice()):t.setUserCurrentLocation({code:1})},setNewMarkerPositionOnMapViewport:function(){t.setNewMarkerPosition(n.center)}})})(Object(z.withSnackbar)(ka)),Oa=function(){return W.a.createElement(G.a,{store:Br()},W.a.createElement(V.MuiThemeProvider,{theme:qr},W.a.createElement(z.SnackbarProvider,{maxSnack:w.MAX_SNACK,anchorOrigin:w.ANCHOR},W.a.createElement(K.a,{basename:"/map"},W.a.createElement(W.a.Fragment,null,W.a.createElement($.c,null,W.a.createElement($.a,{path:"/",component:va})))))))},Ra=(r(5678),r(5679),document.getElementById("root"));Ra&&q.a.render(W.a.createElement(Oa,null),Ra)}},[[5491,1,2]]]);
//# sourceMappingURL=main.7ded3bd8.chunk.js.map